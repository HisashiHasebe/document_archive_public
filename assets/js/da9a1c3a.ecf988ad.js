"use strict";(self.webpackChunkkurokuro=self.webpackChunkkurokuro||[]).push([[39627],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>u});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),l=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=l(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=m(e,["components","mdxType","originalType","parentName"]),d=l(a),g=i,u=d["".concat(s,".").concat(g)]||d[g]||c[g]||r;return a?n.createElement(u,o(o({ref:t},p),{},{components:a})):n.createElement(u,o({ref:t},p))}));function u(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=g;var m={};for(var s in t)hasOwnProperty.call(t,s)&&(m[s]=t[s]);m.originalType=e,m[d]="string"==typeof e?e:i,o[1]=m;for(var l=2;l<r;l++)o[l]=a[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"},97449:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>m,toc:()=>l});var n=a(87462),i=(a(67294),a(3905));const r={title:"How to implement member registration with authentication function using Kuroco and Nuxt.js",description:"We will implement a registration with authentication function that sends an authentication email to the registered email address during new member registration. The link in the authentication email is used to access the registration screen, where the password is set to complete the registration process."},o=void 0,m={unversionedId:"tutorials/setting-up-pre-member-registration-form",id:"tutorials/setting-up-pre-member-registration-form",title:"How to implement member registration with authentication function using Kuroco and Nuxt.js",description:"We will implement a registration with authentication function that sends an authentication email to the registered email address during new member registration. The link in the authentication email is used to access the registration screen, where the password is set to complete the registration process.",source:"@site/docs/tutorials/setting-up-pre-member-registration-form.md",sourceDirName:"tutorials",slug:"/tutorials/setting-up-pre-member-registration-form",permalink:"/docs/tutorials/setting-up-pre-member-registration-form",draft:!1,editUrl:"https://github.com/diverta/kuroco-documents/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials/setting-up-pre-member-registration-form.md",tags:[],version:"current",frontMatter:{title:"How to implement member registration with authentication function using Kuroco and Nuxt.js",description:"We will implement a registration with authentication function that sends an authentication email to the registered email address during new member registration. The link in the authentication email is used to access the registration screen, where the password is set to complete the registration process."},sidebar:"documentationSidebar",previous:{title:"Setting up a new member registration form with Kuroco and Nuxt.js",permalink:"/docs/tutorials/setting-up-registration-form"},next:{title:"Implementing Two-Factor Authentication on the Member Registration Screen with Kuroco and Nuxt.js",permalink:"/docs/tutorials/implementing-two-step-verification-on-registration-form"}},s={},l=[{value:"Overview",id:"overview",level:2},{value:"What you will learn",id:"what-you-will-learn",level:3},{value:"Before you start",id:"before-you-start",level:3},{value:"API settings",id:"api-settings",level:2},{value:"Set API basic settings",id:"set-api-basic-settings",level:3},{value:"Configure CORS",id:"configure-cors",level:3},{value:"Create endpoints",id:"create-endpoints",level:3},{value:"Member registration endpoint",id:"member-registration-endpoint",level:4},{value:"Pending member registration endpoint",id:"pending-member-registration-endpoint",level:4},{value:"Test the registration function with Swagger UI",id:"test-the-registration-function-with-swagger-ui",level:2},{value:"Send invitation email with Member::invite endpoint",id:"send-invitation-email-with-memberinvite-endpoint",level:3},{value:"Get pending member information using key",id:"get-pending-member-information-using-key",level:3},{value:"Register a member using Member::insert endpoint",id:"register-a-member-using-memberinsert-endpoint",level:3},{value:"Adjust message template",id:"adjust-message-template",level:2},{value:"Implement the front end",id:"implement-the-front-end",level:2},{value:"Create page for pre-registration",id:"create-page-for-pre-registration",level:3},{value:"Create the main registration page",id:"create-the-main-registration-page",level:3},{value:"Testing",id:"testing",level:3},{value:"Sending pending registration e-mail",id:"sending-pending-registration-e-mail",level:4},{value:"Check the content of pending registration e-mail",id:"check-the-content-of-pending-registration-e-mail",level:4},{value:"Member registration",id:"member-registration",level:4},{value:"Related Documents",id:"related-documents",level:2}],p={toc:l},d="wrapper";function c(e){let{components:t,...a}=e;return(0,i.kt)(d,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"We will implement a registration with authentication function that sends an authentication email to the registered email address during new member registration. The link in the authentication email is used to access the registration screen, where the password is set to complete the registration process."),(0,i.kt)("h3",{id:"what-you-will-learn"},"What you will learn"),(0,i.kt)("p",null,"The registration with authentication function is implemented by the following the steps below."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#api-settings"},"API settings")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#test-the-registration-function-with-swagger-ui"},"Test the registration function with Swagger UI")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#adjust-message-template"},"Adjust message template")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#implement-the-front-end"},"Implement the front end"))),(0,i.kt)("h3",{id:"before-you-start"},"Before you start"),(0,i.kt)("p",null,"This page assumes that you have already built a project with Kuroco and Nuxt.js.",(0,i.kt)("br",{parentName:"p"}),"\n","If you haven't built one yet, see the tutorial below.  "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/tutorials/beginners-guide/"},"Beginner's guide to Kuroco")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/tutorials/setting-up-registration-form/"},"Setting up a new member registration form with Kuroco and Nuxt.js"))),(0,i.kt)("h2",{id:"api-settings"},"API settings"),(0,i.kt)("p",null,"First, we will create the API used by the registration function.  "),(0,i.kt)("h3",{id:"set-api-basic-settings"},"Set API basic settings"),(0,i.kt)("p",null,"First, create a new API.",(0,i.kt)("br",{parentName:"p"}),"\n","From the Kuroco admin panel, click ","[API]","->","[Default]",".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/a284209609dd566ad1d041aa5f51934f.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/a284209609dd566ad1d041aa5f51934f.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"Click ","[Add]",".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/6544c8a29317e971d2d1adb8c28a4ae7.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/6544c8a29317e971d2d1adb8c28a4ae7.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"Enter title, version, and description and click ","[Add]",".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/00ad4a7b59e019098c8b3325e5182b39.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/00ad4a7b59e019098c8b3325e5182b39.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"You will be redirected to the new API page.",(0,i.kt)("br",{parentName:"p"}),"\n","Next, you will need to configure the security settings.",(0,i.kt)("br",{parentName:"p"}),"\n","Click ","[Security]",".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/ae816ad541189966e65ee9afdcc34658.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/ae816ad541189966e65ee9afdcc34658.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"Select ","[Cookie]"," and click ","[Save]",".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/d83beb69ef737fd3c589c88202758790.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/d83beb69ef737fd3c589c88202758790.png",alt:"Image from Gyazo"})),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},'Configure the security settings according to your needs. "Cookies" is used for this tutorial.'),(0,i.kt)("li",{parentName:"ul"},"When using cookies as security tokens, different API domain and frontend domains may cause authentication to not work on browsers such as Safari due to third-party cookies.",(0,i.kt)("br",{parentName:"li"}),"It is necessary to set the frontend and API domain with different subdomains, set up the API domain on ",(0,i.kt)("a",{parentName:"li",href:"/docs/management/custom-domain-tls-certificate/"},"Original domain/TLS certificate")," and change the API domain on ",(0,i.kt)("a",{parentName:"li",href:"/docs/management/account/"},"Account Settings"),".",(0,i.kt)("br",{parentName:"li"}),"(It works fine in Chrome, so we recommend that you build in Chrome first during the development and testing phase)."))),(0,i.kt)("h3",{id:"configure-cors"},"Configure CORS"),(0,i.kt)("p",null,"Click on ","[Operation CORS]","."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/9692b77537470f8cb98612bf0b3b492c.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/9692b77537470f8cb98612bf0b3b492c.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"Click ","[Add Origin]"," of CORS_ALLOW_ORIGINS and enter the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"http://localhost:3000")),(0,i.kt)("li",{parentName:"ul"},"Frontend domain"),(0,i.kt)("li",{parentName:"ul"},"Admin panel URL")),(0,i.kt)("p",null,"Click ","[Add Method]"," of CORS_ALLOW_METHODS and enter the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"GET  "),(0,i.kt)("li",{parentName:"ul"},"POST"),(0,i.kt)("li",{parentName:"ul"},"OPTIONS")),(0,i.kt)("p",null,"Confirm that ","[Allow Credentials]"," of CORS_ALLOW_CREDENTIALS is checked.  "),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/e59bc498d42a8e96f86f6d2e03d8c133.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/e59bc498d42a8e96f86f6d2e03d8c133.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"After finishing the configurations, click ","[Save]","."),(0,i.kt)("h3",{id:"create-endpoints"},"Create endpoints"),(0,i.kt)("p",null,"Next, we create following endpoints."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Member registration endpoint"),(0,i.kt)("li",{parentName:"ul"},"Pending member registration endpoint")),(0,i.kt)("h4",{id:"member-registration-endpoint"},"Member registration endpoint"),(0,i.kt)("p",null,"Create an endpoint for member registration with the following settings."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Item"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Settings"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"Path"),(0,i.kt)("td",{parentName:"tr",align:"left"},"member/regist")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"Category"),(0,i.kt)("td",{parentName:"tr",align:"left"},"Member")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"Model"),(0,i.kt)("td",{parentName:"tr",align:"left"},"Member")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"Operation"),(0,i.kt)("td",{parentName:"tr",align:"left"},"insert")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"default_group_id"),(0,i.kt)("td",{parentName:"tr",align:"left"},"Enter the member group ID to assign the user to when they register.",(0,i.kt)("br",null)," You can check the group ID(s) on ",(0,i.kt)("a",{parentName:"td",href:"/docs/management/group/"},"Group"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"login_ok_flg"),(0,i.kt)("td",{parentName:"tr",align:"left"},"Enabled")))),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/3fb700af86556fe74b1b67c9aa1b4f36.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/3fb700af86556fe74b1b67c9aa1b4f36.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"Click ","[Add]"," after finishing the above configuration."),(0,i.kt)("h4",{id:"pending-member-registration-endpoint"},"Pending member registration endpoint"),(0,i.kt)("p",null,"Create an endpoint for pending member registration as follows:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Item"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Settings"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"Path"),(0,i.kt)("td",{parentName:"tr",align:"left"},"member/invite")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"Category"),(0,i.kt)("td",{parentName:"tr",align:"left"},"member")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"Model"),(0,i.kt)("td",{parentName:"tr",align:"left"},"Member")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"Operation"),(0,i.kt)("td",{parentName:"tr",align:"left"},"invite")))),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/f4bdadd079c0f3676d2c265e24f14222.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/f4bdadd079c0f3676d2c265e24f14222.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"Click ","[Add]"," after finishing the above configuration."),(0,i.kt)("h2",{id:"test-the-registration-function-with-swagger-ui"},"Test the registration function with Swagger UI"),(0,i.kt)("p",null,"After configuring API, we will test the registration function with Swagger UI."),(0,i.kt)("h3",{id:"send-invitation-email-with-memberinvite-endpoint"},"Send invitation email with Member::invite endpoint"),(0,i.kt)("p",null,"Click ","[Swagger UI]",".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/287bab8cd2b992cbe699988df76bde30.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/287bab8cd2b992cbe699988df76bde30.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"Click ","[/rcms-api/10/member/invite]",".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/8e6f524acb5dff136139bd32071856ea.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/8e6f524acb5dff136139bd32071856ea.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"Click ","[Try it out]",".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/7a7dd05ec5c487357e44bdb55f3c9bc8.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/7a7dd05ec5c487357e44bdb55f3c9bc8.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,'Enter the following data in the "Request body" and click ',"[Execute]",".  "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "email": "your_mail_address@example.com",\n  "ext_info": {\n    "name1": "Diverta",\n    "name2": "Taro"\n  }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/470996856879963017772a63e6b5dc3b.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/470996856879963017772a63e6b5dc3b.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"Verify that the response is returning the HTTP 200 OK code and a message saying the invitation email has been sent to the user.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/3d9ec90dba76a2335c9c8dbcf97a1066.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/3d9ec90dba76a2335c9c8dbcf97a1066.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/6d1c4033bff1d0017adde26899e0a442.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/6d1c4033bff1d0017adde26899e0a442.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"We will modify the email body later, so we will leave it as default for now.",(0,i.kt)("br",{parentName:"p"}),"\n",'Copy the "key" at the end of the URL as we will need it later.  '),(0,i.kt)("h3",{id:"get-pending-member-information-using-key"},"Get pending member information using key"),(0,i.kt)("p",null,"Now post the issued key information to the ",(0,i.kt)("inlineCode",{parentName:"p"},"Member::invite")," endpoint that you used to post the member information earlier.  "),(0,i.kt)("p",null,"Enter the following JSON data in the Request body of ",(0,i.kt)("inlineCode",{parentName:"p"},"Member::invite")," and click ","[Execute]","."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "email_hash": "YOUR_EMAIL_HASH"\n}\n')),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/634a7885a5f505acb7a7468f25b7e82c.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/634a7885a5f505acb7a7468f25b7e82c.png",alt:"Image from Gyazo"})),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Replace ",(0,i.kt)("inlineCode",{parentName:"p"},"YOUR_EMAIL_HASH")," with your own key which you saved in the previous step.  ")),(0,i.kt)("p",null,"Then, you get the response of the member information of temporary registration status.\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/5a62ba3ccdcee8c869368a9648b12b1e.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/5a62ba3ccdcee8c869368a9648b12b1e.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"We will register the member using the above information."),(0,i.kt)("h3",{id:"register-a-member-using-memberinsert-endpoint"},"Register a member using Member::insert endpoint"),(0,i.kt)("p",null,"Finally, we make a request to the member registration endpoint with the obtained pending member information.  "),(0,i.kt)("p",null,"Click ","[/rcms-api/10/member/regist]"," on Swagger UI.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/4a2c956f0ebe7827d3022f5b7dca343e.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/4a2c956f0ebe7827d3022f5b7dca343e.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"Click ","[Try it out]",".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/d14121a9cc2411ffcc7ae98a7ef786af.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/d14121a9cc2411ffcc7ae98a7ef786af.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"Enter the following JSON data in the Request body and click ","[Execute]",".  "),(0,i.kt)("p",null,"The login password is intended to be entered on the registration page."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "email": "your_mail_address@example.com",\n  "name1": "Diverta",\n  "name2": "Taro",\n  "login_pwd": "PASSWORD"\n}\n')),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/14328b005ec61fc0e7a14695a093bfe7.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/14328b005ec61fc0e7a14695a093bfe7.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"A new member should be created.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/32be64b0746354f6c4c1ef419d84cfe3.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/32be64b0746354f6c4c1ef419d84cfe3.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"The above is the flow of the registration with authentication function.\nNext, we will implement this flow on the frontend.  "),(0,i.kt)("h2",{id:"adjust-message-template"},"Adjust message template"),(0,i.kt)("p",null,"Before implementing the frontend, we will adjust the content of the email sent when the ",(0,i.kt)("inlineCode",{parentName:"p"},"Member::invite")," endpoint is called."),(0,i.kt)("p",null,"Click ","[Operation]","->","[Message template]",".\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/754013515185f4dd0d8e724cdf520113.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/754013515185f4dd0d8e724cdf520113.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"Search for the template with identifier ",(0,i.kt)("inlineCode",{parentName:"p"},"member/pre_regist_thanks"),".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/90c3fa8ae87eaf2511a543488653d31f.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/90c3fa8ae87eaf2511a543488653d31f.png",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"The message template editor page will be displayed, enter the following and click ","[Update]",".  "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-smarty"},"RCMS-X-SUBJECT:Thank you for signing up for {$smarty.const.SITE_TITLE}\nDear {$ext_info.name1} {$ext_info.name2}\n\nThank you for signing up for {$smarty.const.SITE_TITLE}.\n\nClick the URL below and complete the member registration.  \n\n\u25a0Signup page\n{$smarty.const.ROOT_URL}/login/signup_pre_regist/done/{$preregist_key}/\n\nWe are looking forward to working with you.\n")),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/084d44a07206a5eb7b4d3bc55ea2d0f4.jpg?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/084d44a07206a5eb7b4d3bc55ea2d0f4.jpg",alt:"Image from Gyazo"})),(0,i.kt)("h2",{id:"implement-the-front-end"},"Implement the front end"),(0,i.kt)("p",null,"Finally, we will implement a frontend that completes the feature setup above."),(0,i.kt)("h3",{id:"create-page-for-pre-registration"},"Create page for pre-registration"),(0,i.kt)("p",null,"Create a file ",(0,i.kt)("inlineCode",{parentName:"p"},"index.vue")," in the ",(0,i.kt)("inlineCode",{parentName:"p"},"/login/signup_pre_regist/")," directory.  "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-markup",metastring:'reference title="/login/signup_pre_regist/index.vue"',reference:!0,title:'"/login/signup_pre_regist/index.vue"'},"https://github.com/diverta/kuroco-documents/blob/main/sample_code/front-end/nuxtjs/signup_pre_regist.vue\n")),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Replace ",(0,i.kt)("inlineCode",{parentName:"p"},"/rcms-api/33/member_invite")," with your own endpoint URL.")),(0,i.kt)("h3",{id:"create-the-main-registration-page"},"Create the main registration page"),(0,i.kt)("p",null,"Create a ",(0,i.kt)("inlineCode",{parentName:"p"},"_key.vue")," file in the ",(0,i.kt)("inlineCode",{parentName:"p"},"/login/signup_pre_regist/done/")," directory."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"In the ",(0,i.kt)("inlineCode",{parentName:"li"},"validate({ params })")," section, a 404 page will be displayed if there is no key or if the number of digits of the key is does not match the expected value."),(0,i.kt)("li",{parentName:"ul"},"In the ",(0,i.kt)("inlineCode",{parentName:"li"},"async asyncData()")," section, we retrieve information for pending members."),(0,i.kt)("li",{parentName:"ul"},"In the ",(0,i.kt)("inlineCode",{parentName:"li"},"a"),"sync registUser()",(0,i.kt)("inlineCode",{parentName:"li"},"section, we combine the information for pending members with the login password and send it to the endpoint of"),"Member::insert`.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-markup",metastring:'reference title="/login/signup_pre_regist/done/_key.vue"',reference:!0,title:'"/login/signup_pre_regist/done/_key.vue"'},"https://github.com/diverta/kuroco-documents/blob/main/sample_code/front-end/nuxtjs/signup_pre_registdone_done.vue\n")),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Replace ",(0,i.kt)("inlineCode",{parentName:"p"},"/rcms-api/33/member_invite")," with your own endpoint URL.")),(0,i.kt)("h3",{id:"testing"},"Testing"),(0,i.kt)("p",null,"Test and confirm that the member has been registered as expected. "),(0,i.kt)("h4",{id:"sending-pending-registration-e-mail"},"Sending pending registration e-mail"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/2c07311e5e322a4804ead5c0231a38f0.gif?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/2c07311e5e322a4804ead5c0231a38f0.gif",alt:"Image from Gyazo"})),(0,i.kt)("h4",{id:"check-the-content-of-pending-registration-e-mail"},"Check the content of pending registration e-mail"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/8f4bc0a4f041d98f71b5e094ee0198af.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/8f4bc0a4f041d98f71b5e094ee0198af.png",alt:"Image from Gyazo"})),(0,i.kt)("h4",{id:"member-registration"},"Member registration"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/3eafa7384b9802eeffd87e48280f3040.gif?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/3eafa7384b9802eeffd87e48280f3040.gif",alt:"Image from Gyazo"})),(0,i.kt)("p",null,"The implementation of member pending registration function is now complete."),(0,i.kt)("h2",{id:"related-documents"},"Related Documents"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/tutorials/setting-up-registration-form/"},"Setting up a new member registration form with Kuroco and Nuxt.js")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/management/email-template/"},"Message Template")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/faq/can-i-customize-my-thank-you-e-mail/"},"Can I customize my thank-you e-mails?"))))}c.isMDXComponent=!0}}]);