"use strict";(self.webpackChunkkurokuro=self.webpackChunkkurokuro||[]).push([[1236],{3905:(t,e,a)=>{a.d(e,{Zo:()=>p,kt:()=>f});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var c=n.createContext({}),s=function(t){var e=n.useContext(c),a=e;return t&&(a="function"==typeof t?t(e):o(o({},e),t)),a},p=function(t){var e=s(t.components);return n.createElement(c.Provider,{value:e},t.children)},u="mdxType",m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},d=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,i=t.originalType,c=t.parentName,p=l(t,["components","mdxType","originalType","parentName"]),u=s(a),d=r,f=u["".concat(c,".").concat(d)]||u[d]||m[d]||i;return a?n.createElement(f,o(o({ref:e},p),{},{components:a})):n.createElement(f,o({ref:e},p))}));function f(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=a.length,o=new Array(i);o[0]=d;var l={};for(var c in e)hasOwnProperty.call(e,c)&&(l[c]=e[c]);l.originalType=t,l[u]="string"==typeof t?t:r,o[1]=l;for(var s=2;s<i;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},37978:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var n=a(87462),r=(a(67294),a(3905));const i={title:"Notify by Email When a Specific Item in the Content is Updated",description:"The assign_globals Smarty plugin allows you to assign globally shareable variables between triggers called within the same request. This allows you to compare the values before and after the update of the content. In this tutorial, we will implement a feature to notify by email when a specific item in the content is updated, as an example of using assign_globals."},o=void 0,l={unversionedId:"tutorials/notify-by-email-when-specific-items-in-the-content-are-updated",id:"tutorials/notify-by-email-when-specific-items-in-the-content-are-updated",title:"Notify by Email When a Specific Item in the Content is Updated",description:"The assign_globals Smarty plugin allows you to assign globally shareable variables between triggers called within the same request. This allows you to compare the values before and after the update of the content. In this tutorial, we will implement a feature to notify by email when a specific item in the content is updated, as an example of using assign_globals.",source:"@site/docs/tutorials/notify-by-email-when-specific-items-in-the-content-are-updated.md",sourceDirName:"tutorials",slug:"/tutorials/notify-by-email-when-specific-items-in-the-content-are-updated",permalink:"/docs/tutorials/notify-by-email-when-specific-items-in-the-content-are-updated",draft:!1,editUrl:"https://github.com/diverta/kuroco-documents/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials/notify-by-email-when-specific-items-in-the-content-are-updated.md",tags:[],version:"current",frontMatter:{title:"Notify by Email When a Specific Item in the Content is Updated",description:"The assign_globals Smarty plugin allows you to assign globally shareable variables between triggers called within the same request. This allows you to compare the values before and after the update of the content. In this tutorial, we will implement a feature to notify by email when a specific item in the content is updated, as an example of using assign_globals."},sidebar:"documentationSidebar",previous:{title:"Using Any Email Delivery Service for Email Sending from Kuroco(blastengine)",permalink:"/docs/tutorials/use-any-email-delivery-service-to-send-emails-from-kuroco-blastengine"},next:{title:"Apply CSS to a Kuroco management screen with the plugin",permalink:"/docs/tutorials/apply-css-to-a-kuroco-management-screen-with-the-plugin"}},c={},s=[{value:"Overview",id:"overview",level:2},{value:"What you&#39;ll learn",id:"what-youll-learn",level:3},{value:"Set up an item in the content structure",id:"set-up-an-item-in-the-content-structure",level:2},{value:"Set up custom function",id:"set-up-custom-function",level:2},{value:"Before updating content",id:"before-updating-content",level:3},{value:"After updating content",id:"after-updating-content",level:3},{value:"Verify the operation",id:"verify-the-operation",level:2},{value:"Related documents",id:"related-documents",level:2}],p={toc:s},u="wrapper";function m(t){let{components:e,...a}=t;return(0,r.kt)(u,(0,n.Z)({},p,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"{assign_globals}")," Smarty plugin allows you to assign globally shareable variables between triggers called within the same request.",(0,r.kt)("br",{parentName:"p"}),"\n","This allows you to compare the values before and after the update of the content.",(0,r.kt)("br",{parentName:"p"}),"\n","In this tutorial, we will implement a feature to notify by email when a specific item in the content is updated, as an example of using ",(0,r.kt)("inlineCode",{parentName:"p"},"{assign_globals}"),".  "),(0,r.kt)("h3",{id:"what-youll-learn"},"What you'll learn"),(0,r.kt)("p",null,"In this tutorial, you will learn how to implement a feature to notify by email when a specific item in the content is updated, following these steps:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#set-up-an-item-in-the-content-structure"},"Set up an item in the content structure")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#set-up-custom-processing"},"Set up custom function")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#verify-the-operation"},"Verify the operation"))),(0,r.kt)("h2",{id:"set-up-an-item-in-the-content-structure"},"Set up an item in the content structure"),(0,r.kt)("p",null,"Set up an extension item that will be the target of comparison in the content structure.  "),(0,r.kt)("p",null,"Set the following extension item in any content structure:  "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Parent field"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Field name"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Field settings"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"None"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Item Name: Status",(0,r.kt)("br",null),"Identifier: status"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selection format",(0,r.kt)("br",null),"InputRequired",(0,r.kt)("br",null),"1: 1",(0,r.kt)("br",null),"2: 2",(0,r.kt)("br",null),"3: 3")))),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/6c5254a33705cbb54b90a098c83d0541.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/6c5254a33705cbb54b90a098c83d0541.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Once the content structure is ready, add a test content.  "),(0,r.kt)("h2",{id:"set-up-custom-function"},"Set up custom function"),(0,r.kt)("p",null,"Once the content is ready, write the custom function."),(0,r.kt)("p",null,"Click ","[Operations]"," -> ","[Custom function]","."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/cb5f6e5e7baecef758932ce7e380ce79.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/cb5f6e5e7baecef758932ce7e380ce79.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Click ","[Add]",' to create custom function for "Before updating content" and "After updating content".'),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/25c556be5f60d1724c15b2942029a68f.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/25c556be5f60d1724c15b2942029a68f.png",alt:"Image from Gyazo"})),(0,r.kt)("h3",{id:"before-updating-content"},"Before updating content"),(0,r.kt)("p",null,"Write the processing that will run before updating content, assigning the value of the content before the update to a global variable.  "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Item"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Title"),(0,r.kt)("td",{parentName:"tr",align:"left"},"capture_before_update_content")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Identifier"),(0,r.kt)("td",{parentName:"tr",align:"left"},"capture_before_update_content")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Trigger"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Before updating content / Specify the ID of the target content structure")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Processing"),(0,r.kt)("td",{parentName:"tr",align:"left"},"The following content")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-smarty",metastring:'reference title="capture_before_update_content"',reference:!0,title:'"capture_before_update_content"'},"https://github.com/diverta/kuroco-documents/blob/main/sample_code/custom_function/pre-processing/capture_before_update_content.txt\n")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/a917f5761c3a8777f45b9ac57e0feffb.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/a917f5761c3a8777f45b9ac57e0feffb.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Once you have entered the information, click ","[Add]"," to add the custom function."),(0,r.kt)("h3",{id:"after-updating-content"},"After updating content"),(0,r.kt)("p",null,"Write the processing that will run after updating content, comparing the value before and after the update assigned to the global variable, and sending a notification email if there is a change."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Item"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Title"),(0,r.kt)("td",{parentName:"tr",align:"left"},"compare_before_and_after_content")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Identifier"),(0,r.kt)("td",{parentName:"tr",align:"left"},"compare_before_and_after_content")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Trigger"),(0,r.kt)("td",{parentName:"tr",align:"left"},"After updating content / Specify the ID of the target content structure")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Processing"),(0,r.kt)("td",{parentName:"tr",align:"left"},"The following content")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-smarty",metastring:'reference title="compare_before_and_after_content"',reference:!0,title:'"compare_before_and_after_content"'},"https://github.com/diverta/kuroco-documents/blob/main/sample_code/custom_function/post-processing/compare_before_and_after_content.txt\n")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Please change the part ",(0,r.kt)("inlineCode",{parentName:"p"},"to='test@example.com'")," to your own notification destination.")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/5e52dcdcec1b92e91c02bb01054bf423.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/5e52dcdcec1b92e91c02bb01054bf423.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Once you have entered the input, click on ","[Add]"," to add custom function."),(0,r.kt)("h2",{id:"verify-the-operation"},"Verify the operation"),(0,r.kt)("p",null,"When you update the status item of the content added for testing, the values before and after the update will be notified as shown below."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/122a8706c07c5b713a84f37bce98d043.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/122a8706c07c5b713a84f37bce98d043.png",alt:"Image from Gyazo"})),(0,r.kt)("h2",{id:"related-documents"},"Related documents"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/reference/trigger-variables/"},"List of triggers and variables available for custom functions")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/reference/smarty-plugin/"},"Smarty Plugin"))))}m.isMDXComponent=!0}}]);