"use strict";(self.webpackChunkkurokuro=self.webpackChunkkurokuro||[]).push([[35511],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>g});var i=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)a=o[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)a=o[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=i.createContext({}),m=function(e){var t=i.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},c=function(e){var t=m(e.components);return i.createElement(s.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=m(a),u=n,g=d["".concat(s,".").concat(u)]||d[u]||p[u]||o;return a?i.createElement(g,r(r({ref:t},c),{},{components:a})):i.createElement(g,r({ref:t},c))}));function g(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,r=new Array(o);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:n,r[1]=l;for(var m=2;m<o;m++)r[m]=a[m];return i.createElement.apply(null,r)}return i.createElement.apply(null,a)}u.displayName="MDXCreateElement"},41734:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>m});var i=a(87462),n=(a(67294),a(3905));const o={title:"Using Any Email Delivery Service for Email Sending from Kuroco(Mailchimp)",description:'By using the trigger "Replace the default email sending method (SendGrid)" you can send notification and invitation emails using any email delivery service such as blastengine, Mailchimp, Amazon SES, etc. This tutorial will guide you through the steps to replace email sending from SendGrid to Mailchimp.'},r=void 0,l={unversionedId:"tutorials/use-any-email-delivery-service-to-send-emails-from-kuroco-mailchimp",id:"tutorials/use-any-email-delivery-service-to-send-emails-from-kuroco-mailchimp",title:"Using Any Email Delivery Service for Email Sending from Kuroco(Mailchimp)",description:'By using the trigger "Replace the default email sending method (SendGrid)" you can send notification and invitation emails using any email delivery service such as blastengine, Mailchimp, Amazon SES, etc. This tutorial will guide you through the steps to replace email sending from SendGrid to Mailchimp.',source:"@site/docs/tutorials/use-any-email-delivery-service-to-send-emails-from-kuroco-mailchimp.md",sourceDirName:"tutorials",slug:"/tutorials/use-any-email-delivery-service-to-send-emails-from-kuroco-mailchimp",permalink:"/docs/tutorials/use-any-email-delivery-service-to-send-emails-from-kuroco-mailchimp",draft:!1,editUrl:"https://github.com/diverta/kuroco-documents/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials/use-any-email-delivery-service-to-send-emails-from-kuroco-mailchimp.md",tags:[],version:"current",frontMatter:{title:"Using Any Email Delivery Service for Email Sending from Kuroco(Mailchimp)",description:'By using the trigger "Replace the default email sending method (SendGrid)" you can send notification and invitation emails using any email delivery service such as blastengine, Mailchimp, Amazon SES, etc. This tutorial will guide you through the steps to replace email sending from SendGrid to Mailchimp.'},sidebar:"documentationSidebar",previous:{title:"Sending Inquiry Notifications to Chatwork",permalink:"/docs/tutorials/send-chatwork-notification-after-a-form-has-been-submitted"},next:{title:"Using Any Email Delivery Service for Email Sending from Kuroco(blastengine)",permalink:"/docs/tutorials/use-any-email-delivery-service-to-send-emails-from-kuroco-blastengine"}},s={},m=[{value:"Overview",id:"overview",level:2},{value:"What you&#39;ll learn",id:"what-youll-learn",level:3},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Setting up Mailchimp",id:"setting-up-mailchimp",level:2},{value:"Account registration",id:"account-registration",level:3},{value:"Obtaining the API key",id:"obtaining-the-api-key",level:3},{value:"Adding a sending domain",id:"adding-a-sending-domain",level:3},{value:"Verified Domain",id:"verified-domain",level:4},{value:"DKIM Settings",id:"dkim-settings",level:4},{value:"SPF Settings",id:"spf-settings",level:4},{value:"Setting up Kuroco",id:"setting-up-kuroco",level:2},{value:"Register the Secret",id:"register-the-secret",level:3},{value:"Register Custom Processing",id:"register-custom-processing",level:3},{value:"Confirmation of operation",id:"confirmation-of-operation",level:2},{value:"Related Documents",id:"related-documents",level:2}],c={toc:m},d="wrapper";function p(e){let{components:t,...a}=e;return(0,n.kt)(d,(0,i.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"overview"},"Overview"),(0,n.kt)("p",null,'By using the trigger "Replace the default email sending method (SendGrid)", you can send notification and invitation emails using any email delivery service such as blastengine, Mailchimp, Amazon SES, etc.'),(0,n.kt)("p",null,"This tutorial will guide you through the steps to replace email sending from SendGrid to Mailchimp."),(0,n.kt)("h3",{id:"what-youll-learn"},"What you'll learn"),(0,n.kt)("p",null,"You will learn how to implement email sending using any email delivery service with the following steps:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#setting-up-mailchimp"},"Setting up mailchimp")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#setting-up-kuroco"},"Setting up Kuroco")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#confirmation-of-operation"},"Confirmation of operation"))),(0,n.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"In this tutorial, we will be using Mailchimp's Transactional API for sending emails.",(0,n.kt)("br",{parentName:"p"}),"\n","Please refer to ",(0,n.kt)("a",{parentName:"p",href:"https://mailchimp.com/"},"Mailchimp")," and its ",(0,n.kt)("a",{parentName:"p",href:"https://mailchimp.com/developer/transactional/guides/quick-start/"},"API documentation")," for more details about the service.  "),(0,n.kt)("p",{parentName:"admonition"},'Also, since we will be configuring SPF/DKIM, make sure to use a domain that you own for the "from" email.')),(0,n.kt)("h2",{id:"setting-up-mailchimp"},"Setting up Mailchimp"),(0,n.kt)("h3",{id:"account-registration"},"Account registration"),(0,n.kt)("p",null,"First, access ",(0,n.kt)("a",{parentName:"p",href:"https://mailchimp.com/"},"Mailchimp")," and register for an account."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/2b7787c15b5474cd4ed90d3638ef73b0.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/2b7787c15b5474cd4ed90d3638ef73b0.png",alt:"Image from Gyazo"})),(0,n.kt)("h3",{id:"obtaining-the-api-key"},"Obtaining the API key"),(0,n.kt)("p",null,"Once the activation is complete and you have logged into your account, click on ","[Automations]"," -> ","[Transactional email]"," and then click ","[Launch App]"," to access the dashboard."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/c17c3dad09a0d1b4f11dff832296cde1.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/c17c3dad09a0d1b4f11dff832296cde1.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Click on ","[Settings]","."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/0d9951a65d9d65562f0b07c16454d114.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/0d9951a65d9d65562f0b07c16454d114.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Click on ","[Add API key]","."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/153a1af87b99a757ad698b1529e21d9d.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/153a1af87b99a757ad698b1529e21d9d.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Make a note of the API key that is displayed."),(0,n.kt)("h3",{id:"adding-a-sending-domain"},"Adding a sending domain"),(0,n.kt)("p",null,"Next, you need to add the domain that will be used as the sender of the emails and configure authentication, SPF, and DKIM."),(0,n.kt)("p",null,"Click on the ","[Domains]"," tab and enter the domain that will be used as the sender, then click ","[Add]","."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/1cbca3444652efa8de024963d1be1ac5.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/1cbca3444652efa8de024963d1be1ac5.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"The added domain and the necessary settings for using the domain will be displayed. Click on ","[View details]",", ","[View DKIM settings]",", and ","[View SPF settings]"," to configure the required DNS settings."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/a64145f256be9c5a4fb6765962b673b4.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/a64145f256be9c5a4fb6765962b673b4.png",alt:"Image from Gyazo"})),(0,n.kt)("h4",{id:"verified-domain"},"Verified Domain"),(0,n.kt)("p",null,"To authenticate the domain, set the value specified in the TXT record of the domain."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/6d0e0dfc56f5834613c7d906a8c48947.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/6d0e0dfc56f5834613c7d906a8c48947.png",alt:"Image from Gyazo"})),(0,n.kt)("h4",{id:"dkim-settings"},"DKIM Settings"),(0,n.kt)("p",null,"Set the value specified in the TXT record of ",(0,n.kt)("inlineCode",{parentName:"p"},"specified selector._domainkey.domain name")," for DKIM."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/c7591b77d2beb005a6703a420251af80.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/c7591b77d2beb005a6703a420251af80.png",alt:"Image from Gyazo"})),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"If the length of the VALUE exceeds the maximum allowed characters, you need to split the TXT record and register it separately.",(0,n.kt)("br",{parentName:"p"}),"\n","If necessary, please contact your domain management service for assistance.")),(0,n.kt)("h4",{id:"spf-settings"},"SPF Settings"),(0,n.kt)("p",null,"Set the value specified in the TXT record of the domain for SPF."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/c6ccbc32cd030af7f351cf890ff7e826.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/c6ccbc32cd030af7f351cf890ff7e826.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Once you have configured each setting, it should look like the following:",(0,n.kt)("br",{parentName:"p"}),"\n",'\u203b The screenshot is an example for the case of using "\u304a\u540d\u524d\u30c9\u30c3\u30c8\u30b3\u30e0" as the domain.'),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/4350f835c20b96e96b45749b3ad54ebb.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/4350f835c20b96e96b45749b3ad54ebb.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Click on ","[Test DNS Settings]"," to confirm all authentication and complete the setup."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/2b0274241048bf2f3ffa75efaf35661a.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/2b0274241048bf2f3ffa75efaf35661a.png",alt:"Image from Gyazo"})),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"With MailChimp's Free plan, you can only send and receive emails to and Sending Domains that have been registered and have completed all authentication. If you want to allow sending to all email addresses, please subscribe to a paid plan.")),(0,n.kt)("h2",{id:"setting-up-kuroco"},"Setting up Kuroco"),(0,n.kt)("h3",{id:"register-the-secret"},"Register the Secret"),(0,n.kt)("p",null,'Access the Kuroco management screen and In the left sidebar menu, under "SETTINGS", click ',"[Environment]"," -> ","[Secrets]","."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/57c492bf4736d7276b41f960360b83cc.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/57c492bf4736d7276b41f960360b83cc.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Click on ","[Add]","."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/53708c3495a35fd72fdeea9266ebc64a.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/53708c3495a35fd72fdeea9266ebc64a.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Register the API key obtained from the Mailchimp dashboard."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Field"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Name"),(0,n.kt)("td",{parentName:"tr",align:"left"},"MAILCHIMP_API_KEY")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Value"),(0,n.kt)("td",{parentName:"tr",align:"left"},"API key from Mailchimp")))),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/1b01308b5767d6441d5c1a0965318377.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/1b01308b5767d6441d5c1a0965318377.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"With this, the preparation for using Mailchimp is complete."),(0,n.kt)("h3",{id:"register-custom-processing"},"Register Custom Processing"),(0,n.kt)("p",null,"Once you have prepared to use Mailchimp, write custom processing to replace email sending with SendGrid to Mailchimp."),(0,n.kt)("p",null,"In the left sidebar menu, click ","[Operation]"," -> ","[Custom function]"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/cb5f6e5e7baecef758932ce7e380ce79.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/cb5f6e5e7baecef758932ce7e380ce79.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,'Click on "Add".'),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/25c556be5f60d1724c15b2942029a68f.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/25c556be5f60d1724c15b2942029a68f.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Configure as follows:\n|Field|Value|\n|:--|:--|\n|Title|sending_email_with_mailchimp|\n|Identifier|sending_email_with_mailchimp|\n|Trigger|Replace the default email sending method (SendGrid)|\n|Processing|The following content|"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-smarty",metastring:'title="sending_email_with_mailchimp"',title:'"sending_email_with_mailchimp"'},"{* Set Request Headers *}\n{append var=headers value=\"Content-Type: application/json\"}\n\n{* Set Body *}\n{assign var='payload' value=$payload|@json_decode}\n{assign_array var='body' values=\"\"}\n{secret var='body.key' key='MAILCHIMP_API_KEY'}\n{assign var='body.message.from_email' value=\"noreply@kuroco-mail.app\"}\n{assign var='body.message.subject' value=$payload.subject}\n{assign var='body.message.text' value=$payload.text_part}\n{assign_array var='to' values=\"\"}\n{assign var='to.email' value=$payload.to}\n{assign var='to.type' value=\"to\"}\n{append var='body.message.to' value=$to}\n\n{* Send Request *}\n{api\n    endpoint=\"https://mandrillapp.com/api/1.0/messages/send\"\n    method='POST'\n    headers=$headers\n    body=$body\n    var=response\n    status_var=status\n}\n\n{logger msg1=\"mailchimp_mail_log\" msg2=$body msg3=$response}\n{assign var=\"is_mail_sent\" value=true}\n")),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"Replace ",(0,n.kt)("inlineCode",{parentName:"p"},"noreply@kuroco-mail.app")," with your own email address.")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/cab97bd1795c623bcaf6074cbd73052a.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/cab97bd1795c623bcaf6074cbd73052a.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Once you have entered the information, click on ","[Add]"," to add the custom processing."),(0,n.kt)("h2",{id:"confirmation-of-operation"},"Confirmation of operation"),(0,n.kt)("p",null,"Let's send an email from Kuroco to confirm the operation.",(0,n.kt)("br",{parentName:"p"}),"\n","For the purpose of confirmation, we will use the password reminder."),(0,n.kt)("p",null,"Access the Kuroco login screen and click on ","[Forgot your password?]","."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/24045bad64606073659c477468dae183.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/24045bad64606073659c477468dae183.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Enter your email address and click on ","[Send]","."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/add00d4234028c8f53570f95bcc10c32.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/add00d4234028c8f53570f95bcc10c32.png",alt:"Image from Gyazo"})),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"If you are using the Free plan, the recipient's email address must be authenticated with the Mailchimp sending domains.")),(0,n.kt)("p",null,"When you check ",(0,n.kt)("a",{parentName:"p",href:"https://mandrillapp.com/activity"},"Activity")," in Mailchimp, you can see that the email was sent from Mailchimp."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/0ea10a0306a86670c83044daf550c930.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/0ea10a0306a86670c83044daf550c930.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"With this, the configuration to use any email delivery service is complete."),(0,n.kt)("h2",{id:"related-documents"},"Related Documents"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/reference/trigger-variables/"},"List of Triggers and Variables available for Custom Processing")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/reference/smarty-plugin/"},"Smarty Plugin")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/reference/smarty-php-function/"},"PHP Functions available in Kuroco's Smarty"))))}p.isMDXComponent=!0}}]);