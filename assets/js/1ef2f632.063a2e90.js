"use strict";(self.webpackChunkkurokuro=self.webpackChunkkurokuro||[]).push([[33332],{3905:(t,e,a)=>{a.d(e,{Zo:()=>p,kt:()=>f});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function d(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var l=n.createContext({}),m=function(t){var e=n.useContext(l),a=e;return t&&(a="function"==typeof t?t(e):o(o({},e),t)),a},p=function(t){var e=m(t.components);return n.createElement(l.Provider,{value:e},t.children)},s="mdxType",c={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},g=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,i=t.originalType,l=t.parentName,p=d(t,["components","mdxType","originalType","parentName"]),s=m(a),g=r,f=s["".concat(l,".").concat(g)]||s[g]||c[g]||i;return a?n.createElement(f,o(o({ref:e},p),{},{components:a})):n.createElement(f,o({ref:e},p))}));function f(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=a.length,o=new Array(i);o[0]=g;var d={};for(var l in e)hasOwnProperty.call(e,l)&&(d[l]=e[l]);d.originalType=t,d[s]="string"==typeof t?t:r,o[1]=d;for(var m=2;m<i;m++)o[m]=a[m];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"},68193:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>d,toc:()=>m});var n=a(87462),r=(a(67294),a(3905));const i={title:"Specify the membership group based on the domain at the time of member registration",description:"The endpoint for Member::insert cannot change default_group_id from the frontend due to security. Therefore, multiple endpoints are created, and the function is implemented by distributing the endpoint to be used depending on the domain using custom function."},o=void 0,d={unversionedId:"tutorials/change-the-default-group-for-member-registration-depending-on-the-domain",id:"tutorials/change-the-default-group-for-member-registration-depending-on-the-domain",title:"Specify the membership group based on the domain at the time of member registration",description:"The endpoint for Member::insert cannot change default_group_id from the frontend due to security. Therefore, multiple endpoints are created, and the function is implemented by distributing the endpoint to be used depending on the domain using custom function.",source:"@site/docs/tutorials/change-the-default-group-for-member-registration-depending-on-the-domain.md",sourceDirName:"tutorials",slug:"/tutorials/change-the-default-group-for-member-registration-depending-on-the-domain",permalink:"/docs/tutorials/change-the-default-group-for-member-registration-depending-on-the-domain",draft:!1,editUrl:"https://github.com/diverta/kuroco-documents/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials/change-the-default-group-for-member-registration-depending-on-the-domain.md",tags:[],version:"current",frontMatter:{title:"Specify the membership group based on the domain at the time of member registration",description:"The endpoint for Member::insert cannot change default_group_id from the frontend due to security. Therefore, multiple endpoints are created, and the function is implemented by distributing the endpoint to be used depending on the domain using custom function."},sidebar:"documentationSidebar",previous:{title:"Customize CSV data structure output using Custom Function",permalink:"/docs/tutorials/how-to-implement-original-function-into-the-postprocess"},next:{title:"Displaying Instagram feed using Instagram basic display API in Kuroco",permalink:"/docs/tutorials/call-the-instagram-basic-display-api-from-kuroco"}},l={},m=[{value:"Overview",id:"overview",level:2},{value:"What you can learn",id:"what-you-can-learn",level:3},{value:"Prerequisites",id:"prerequisites",level:3},{value:"API configuration",id:"api-configuration",level:2},{value:"Creating an API",id:"creating-an-api",level:3},{value:"Security configuration",id:"security-configuration",level:3},{value:"Setting CORS",id:"setting-cors",level:3},{value:"Creating endpoints",id:"creating-endpoints",level:3},{value:"Creating custom function",id:"creating-custom-function",level:2},{value:"Testing",id:"testing",level:2},{value:"Related documents",id:"related-documents",level:2}],p={toc:m},s="wrapper";function c(t){let{components:e,...a}=t;return(0,r.kt)(s,(0,n.Z)({},p,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"This tutorial explains how to implement a function that specifies the member group based on the domain at the time of member registration. The endpoint for ",(0,r.kt)("inlineCode",{parentName:"p"},"Member::insert")," cannot change ",(0,r.kt)("inlineCode",{parentName:"p"},"default_group_id")," from the frontend due to security. Therefore, multiple endpoints are created, and this feature is implemented by distributing the endpoint to be used depending on the domain using custom function."),(0,r.kt)("h3",{id:"what-you-can-learn"},"What you can learn"),(0,r.kt)("p",null,"We will implement the feature to change the membership group based on the domain by following the steps below:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#api-configuration"},"API configuration")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#creating-custom-function"},"Creating custom function")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#testing"},"Testing"))),(0,r.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"In this tutorial, we will create endpoints and custom function, then perform the testing using Swagger UI.",(0,r.kt)("br",{parentName:"p"}),"\n","Also, the groups to which the member will be assigned should already be created.  "),(0,r.kt)("p",null,"Refer to ",(0,r.kt)("a",{parentName:"p",href:"/docs/tutorials/setting-up-registration-form/"},"Setting up a new member registration form with Kuroco and Nuxt.js")," for implementation in the frontend."),(0,r.kt)("h2",{id:"api-configuration"},"API configuration"),(0,r.kt)("h3",{id:"creating-an-api"},"Creating an API"),(0,r.kt)("p",null,"It is recommended to create separate APIs for endpoints that are only used internally in Kuroco.",(0,r.kt)("br",{parentName:"p"}),"\n","Therefore, first, create a new API for internal use.",(0,r.kt)("br",{parentName:"p"}),"\n","Click ","[Add]"," from the API in the Kuroco Admin panel.  "),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/9ecf385ebd0bbd4ed2fce44c5b03908a.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/9ecf385ebd0bbd4ed2fce44c5b03908a.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,'On the API creation screen, enter the following and click "Add".  '),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/4ad1441b5747037b667256ac969fa60a.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/4ad1441b5747037b667256ac969fa60a.png",alt:"Image from Gyazo"})),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Item"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Setting"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Title"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Internal")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Version"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Description"),(0,r.kt)("td",{parentName:"tr",align:"left"},"API for internal use")))),(0,r.kt)("p",null,"The API has been created."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/42d21c717bec7d592b968486a036da90.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/42d21c717bec7d592b968486a036da90.png",alt:"Image from Gyazo"})),(0,r.kt)("h3",{id:"security-configuration"},"Security configuration"),(0,r.kt)("p",null,"Next, configure security. Click ","[Security]",".  "),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/02b9bb7afc1ef03a4f26f524267c76a8.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/02b9bb7afc1ef03a4f26f524267c76a8.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Set the security to ","[Dynamic Access Token]",", and click ","[Save]",".   "),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/0a121f90acd9ef3c1494cd895d922dae.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/0a121f90acd9ef3c1494cd895d922dae.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"After setting security to a dynamic access token, it is recommended to use the Login::token endpoint, but it can be ignored if it is for internal use only."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/8ab8a67d5768bf7d84e6e8dc79753de1.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/8ab8a67d5768bf7d84e6e8dc79753de1.png",alt:"Image from Gyazo"})),(0,r.kt)("h3",{id:"setting-cors"},"Setting CORS"),(0,r.kt)("p",null,"Next, we will configure CORS. Click ","[Operation CORS]","."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/706501419568a0dc13e7312f83da4fd4.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/706501419568a0dc13e7312f83da4fd4.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Click ","[Add Origin]"," for CORS_ALLOW_ORIGINS and add the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Admin panel URL")),(0,r.kt)("p",null,"Click ","[Add Method]"," for CORS_ALLOW_METHODS and add the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"GET"),(0,r.kt)("li",{parentName:"ul"},"POST"),(0,r.kt)("li",{parentName:"ul"},"OPTIONS")),(0,r.kt)("p",null,"Check that ","[Allow Credentials]"," is selected for CORS_ALLOW_CREDENTIALS."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/cc94eb7d3a09a673440a54c17e69242e.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/cc94eb7d3a09a673440a54c17e69242e.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Click ","[Save]"," if there are no problems."),(0,r.kt)("h3",{id:"creating-endpoints"},"Creating endpoints"),(0,r.kt)("p",null,"Next, we will create the endpoints. We need two ",(0,r.kt)("inlineCode",{parentName:"p"},"Member::insert")," endpoints with different ",(0,r.kt)("inlineCode",{parentName:"p"},"default_group_id")," and an ",(0,r.kt)("inlineCode",{parentName:"p"},"Api::request_api_post")," endpoint to call the custom function that we will be creating later.  "),(0,r.kt)("p",null,"First, we will create the the ",(0,r.kt)("inlineCode",{parentName:"p"},"Member::insert")," endpoints. These endpoints will be used internally within Kuroco, so we will need to create them by clicking ","[Add new endpoint]",' in the "Internal" API.'),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/d13dbe050d52ad41b2c82fef6c71d867.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/d13dbe050d52ad41b2c82fef6c71d867.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Create the following two endpoints:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Setting"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Path"),(0,r.kt)("td",{parentName:"tr",align:"left"},"member/insert/a")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Category"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Member")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Model"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Member")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Operation"),(0,r.kt)("td",{parentName:"tr",align:"left"},"insert")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"default_group_id"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Group ID to assign the member to (101)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"login_ok_flg"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Checked")))),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/825620f8f9cce32ff24f3b363bc45329.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/825620f8f9cce32ff24f3b363bc45329.png",alt:"Image from Gyazo"})),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Settings"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Path"),(0,r.kt)("td",{parentName:"tr",align:"left"},"member/insert/b")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Category"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Member")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Model"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Member")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Operation"),(0,r.kt)("td",{parentName:"tr",align:"left"},"insert")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"default_group_id"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Group ID to assign the member to (102)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"login_ok_flg"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Checked")))),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/07fa74fdb7055ca6f9ba859e94f6589b.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/07fa74fdb7055ca6f9ba859e94f6589b.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Next, we need to create the ",(0,r.kt)("inlineCode",{parentName:"p"},"Api::request_api_post")," endpoint.",(0,r.kt)("br",{parentName:"p"}),"\n","This API will be used from the frontend so we will create the endpoint in the default API.",(0,r.kt)("br",{parentName:"p"}),"\n","Click ","[Add new endpoint]",' in the "Default" API.'),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/6180b91072835695331f82e5ed2f09f3.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/6180b91072835695331f82e5ed2f09f3.png",alt:"Image from Gyazo"})),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Item"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Settings"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Path"),(0,r.kt)("td",{parentName:"tr",align:"left"},"member/insert")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Category"),(0,r.kt)("td",{parentName:"tr",align:"left"},"API")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Model"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Api")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Operation"),(0,r.kt)("td",{parentName:"tr",align:"left"},"request_api_post")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"name"),(0,r.kt)("td",{parentName:"tr",align:"left"},"member_insert",(0,r.kt)("br",null),"(This will be used as the identifier of the custom function that we will create later.)")))),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/dfde1ad769349fbd53cf72ccebd96891.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/dfde1ad769349fbd53cf72ccebd96891.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"The three endpoints we need now have been created.",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/0749b40007e050fa896f73fb93fff9be.jpg?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/0749b40007e050fa896f73fb93fff9be.jpg",alt:"Image from Gyazo"}),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/aefc36d365297d9be8f30bd433454d56.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/aefc36d365297d9be8f30bd433454d56.png",alt:"Image from Gyazo"})),(0,r.kt)("h2",{id:"creating-custom-function"},"Creating custom function"),(0,r.kt)("p",null,"Next, create custom function to distribute endpoints to send requests to, depending on the domain.\nClick ","[Operation]"," -> ","[Custom function]","."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/9a9b5f1fa42555de0222180269ef487b.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/9a9b5f1fa42555de0222180269ef487b.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Click ","[Add]","."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/52169f762d9ea4abf1d05bb56d553906.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/52169f762d9ea4abf1d05bb56d553906.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Enter the following:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Setting"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Title"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Change registration destination depending on domain")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Identifier"),(0,r.kt)("td",{parentName:"tr",align:"left"},"member_insert ",(0,r.kt)("br",null),"(This needs to be the same name that is set in the ",(0,r.kt)("inlineCode",{parentName:"td"},"Api::request_api")," endpoint.)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Processing"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Enter the following code:")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-smarty"},"{* Change the registration destination depending on the domain of the posted email address. *}\n{* Request body *}\n{assign_array var='body'            values=''}\n{assign       var='body'    value=$smarty.post}\n\n{* If the domain is not @example.com *}\n{if $smarty.post.email|strpos:'@example.com' === false}\n    {api_internal\n        var='response'\n        status_var='status'\n        endpoint='/rcms-api/4/member/insert/a'\n        method='POST'\n        queries=$body\n        member_id='1'\n    }\n{* If the domain is @example.com *}\n{else}\n    {api_internal\n        var='response'\n        status_var='status'\n        endpoint='/rcms-api/4/member/insert/b'\n        method='POST'\n        queries=$body\n        member_id='1'\n    }\n{/if}\n\n{assign var=data value=$response}\n")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Change ",(0,r.kt)("inlineCode",{parentName:"p"},"/rcms-api/4/")," to your own endpoint.")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/18e62e86ff701754cece2e3984acade9.jpg?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/18e62e86ff701754cece2e3984acade9.jpg",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Click ","[Add]"," to save the custom function."),(0,r.kt)("h2",{id:"testing"},"Testing"),(0,r.kt)("p",null,"Finally, we will test that everything is working as expected.",(0,r.kt)("br",{parentName:"p"}),"\n","Click ","[Swagger UI]"," of the Default API."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/9dc3e9d9753bbf8c4ab02d9cac6d4872.jpg?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/9dc3e9d9753bbf8c4ab02d9cac6d4872.jpg",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Click ","[Try it out]"," for the created endpoint."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/265ef85d681791193973b180d2b26a66.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/265ef85d681791193973b180d2b26a66.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Enter the following into Request body and click ","[Execute]","."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "email": "example@example.com",\n  "name1":"Diverta",\n  "name2":"Taro",\n  "login_pwd":"********"\n}\n')),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/f14c4d82b8d5bf1f5bc44cde8415fa02.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/f14c4d82b8d5bf1f5bc44cde8415fa02.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,'Verify the message "Added" and Member ID are displayed.'),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/09532f4f0e9a456ad859e6ba35fb6099.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/09532f4f0e9a456ad859e6ba35fb6099.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"Next, enter the following into the Request body and click ","[Execute]","."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "email": "test@test.com",\n  "name1":"Diverta",\n  "name2":"Jiro",\n  "login_pwd":"********"\n}\n')),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/a28874e9dceb3638262e290625cc7b72.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/a28874e9dceb3638262e290625cc7b72.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,'Verify the message "Added" and Member ID are displayed.'),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/d3db13f48d432b0d0303838f75a27142.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/d3db13f48d432b0d0303838f75a27142.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"When you check the registered members on the member list page, you can confirm that the groups to which Diverta Taro and Diverta Jiro belong to are different.",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/dc0795a01100da37deee99fc27381b10.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/dc0795a01100da37deee99fc27381b10.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"With this, the implementation of determining member group based on domain during member registration is complete."),(0,r.kt)("h2",{id:"related-documents"},"Related documents"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/tutorials/creating-a-custom-function-endpoint/"},"Creating a custom function endpoint")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/faq/how-to-request-kuroco-api-from-smarty-function/"},"Can I call Kuroco API from custom function?")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/tutorials/setting-up-registration-form/"},"Building a new member registration screen with Kuroco and Nuxt.js"))))}c.isMDXComponent=!0}}]);