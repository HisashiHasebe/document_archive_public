"use strict";(self.webpackChunkkurokuro=self.webpackChunkkurokuro||[]).push([[61961],{3905:(t,e,a)=>{a.d(e,{Zo:()=>m,kt:()=>h});var o=a(67294);function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function s(t,e){if(null==t)return{};var a,o,n=function(t,e){if(null==t)return{};var a,o,n={},r=Object.keys(t);for(o=0;o<r.length;o++)a=r[o],e.indexOf(a)>=0||(n[a]=t[a]);return n}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)a=r[o],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}var c=o.createContext({}),l=function(t){var e=o.useContext(c),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},m=function(t){var e=l(t.components);return o.createElement(c.Provider,{value:e},t.children)},p="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return o.createElement(o.Fragment,{},e)}},u=o.forwardRef((function(t,e){var a=t.components,n=t.mdxType,r=t.originalType,c=t.parentName,m=s(t,["components","mdxType","originalType","parentName"]),p=l(a),u=n,h=p["".concat(c,".").concat(u)]||p[u]||d[u]||r;return a?o.createElement(h,i(i({ref:e},m),{},{components:a})):o.createElement(h,i({ref:e},m))}));function h(t,e){var a=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var r=a.length,i=new Array(r);i[0]=u;var s={};for(var c in e)hasOwnProperty.call(e,c)&&(s[c]=e[c]);s.originalType=t,s[p]="string"==typeof t?t:n,i[1]=s;for(var l=2;l<r;l++)i[l]=a[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,a)}u.displayName="MDXCreateElement"},71557:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var o=a(87462),n=(a(67294),a(3905));const r={title:"Sending Inquiry Notifications to Chatwork",description:"Kuroco allows you to create custom APIs and has plugins to send requests to external APIs, making it possible to use services that are not displayed in external system integration by describing custom processing and batch processing. This tutorial explains how to create a custom process to post to Chatwork and send inquiry notifications to Chatwork as an example."},i=void 0,s={unversionedId:"tutorials/send-chatwork-notification-after-a-form-has-been-submitted",id:"tutorials/send-chatwork-notification-after-a-form-has-been-submitted",title:"Sending Inquiry Notifications to Chatwork",description:"Kuroco allows you to create custom APIs and has plugins to send requests to external APIs, making it possible to use services that are not displayed in external system integration by describing custom processing and batch processing. This tutorial explains how to create a custom process to post to Chatwork and send inquiry notifications to Chatwork as an example.",source:"@site/docs/tutorials/send-chatwork-notification-after-a-form-has-been-submitted.md",sourceDirName:"tutorials",slug:"/tutorials/send-chatwork-notification-after-a-form-has-been-submitted",permalink:"/docs/tutorials/send-chatwork-notification-after-a-form-has-been-submitted",draft:!1,editUrl:"https://github.com/diverta/kuroco-documents/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials/send-chatwork-notification-after-a-form-has-been-submitted.md",tags:[],version:"current",frontMatter:{title:"Sending Inquiry Notifications to Chatwork",description:"Kuroco allows you to create custom APIs and has plugins to send requests to external APIs, making it possible to use services that are not displayed in external system integration by describing custom processing and batch processing. This tutorial explains how to create a custom process to post to Chatwork and send inquiry notifications to Chatwork as an example."},sidebar:"documentationSidebar",previous:{title:"DeepL API auto tranlation",permalink:"/docs/tutorials/deepl-api-auto-translation"},next:{title:"Using Any Email Delivery Service for Email Sending from Kuroco(Mailchimp)",permalink:"/docs/tutorials/use-any-email-delivery-service-to-send-emails-from-kuroco-mailchimp"}},c={},l=[{value:"Overview",id:"overview",level:2},{value:"What you&#39;ll learn",id:"what-youll-learn",level:3},{value:"Chatwork settings",id:"chatwork-settings",level:2},{value:"Create a bot account",id:"create-a-bot-account",level:3},{value:"Create a group to receive notifications",id:"create-a-group-to-receive-notifications",level:3},{value:"Get the API token",id:"get-the-api-token",level:3},{value:"Kuroco settings",id:"kuroco-settings",level:2},{value:"Save the API token",id:"save-the-api-token",level:3},{value:"Create a custom process to post to Chatwork",id:"create-a-custom-process-to-post-to-chatwork",level:3},{value:"Edit message template",id:"edit-message-template",level:3},{value:"TIPS",id:"tips",level:4},{value:"Form basic settings",id:"form-basic-settings",level:3},{value:"Confirmation of operation",id:"confirmation-of-operation",level:2},{value:"Related Documents",id:"related-documents",level:2}],m={toc:l},p="wrapper";function d(t){let{components:e,...a}=t;return(0,n.kt)(p,(0,o.Z)({},m,a,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"overview"},"Overview"),(0,n.kt)("p",null,"Kuroco allows you to create custom APIs and has plugins to send requests to external APIs, making it possible to use services that are not displayed in external system integration by describing custom processing and batch processing.",(0,n.kt)("br",{parentName:"p"}),"\n","This tutorial explains how to create a custom process to post to Chatwork and send inquiry notifications to Chatwork."),(0,n.kt)("h3",{id:"what-youll-learn"},"What you'll learn"),(0,n.kt)("p",null,"You will learn how to post inquiry notifications to Chatwork using the following steps:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#chatwork-settings"},"Chatwork settings")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#kuroco-settings"},"Kuroco settings")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#confirmation-of-operation"},"Confirmation of operation"))),(0,n.kt)("h2",{id:"chatwork-settings"},"Chatwork settings"),(0,n.kt)("h3",{id:"create-a-bot-account"},"Create a bot account"),(0,n.kt)("p",null,"The account that will post using the Chatwork API will be the account that created the API token.",(0,n.kt)("br",{parentName:"p"}),"\n","So first, create a bot account on ",(0,n.kt)("a",{parentName:"p",href:"https://www.chatwork.com/service/packages/chatwork/pre_register.php?plan=free&lang=en&page=login"},"Chatwork")," to be the sender of the notifications.  "),(0,n.kt)("p",null,"Once you have created the account, set the profile picture and name.  "),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/9a69810a2d5b67248fa7743f0b10cbfb.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/9a69810a2d5b67248fa7743f0b10cbfb.png",alt:"Image from Gyazo"})),(0,n.kt)("h3",{id:"create-a-group-to-receive-notifications"},"Create a group to receive notifications"),(0,n.kt)("p",null,"Next, create a group chat to receive the notifications.  "),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/1c29ba3ae5012f1afb70a70b67c8437b.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/1c29ba3ae5012f1afb70a70b67c8437b.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Once you are ready, note down the room ID from the group chat settings.  "),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/4943d030f9b84683325484fa874963fa.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/4943d030f9b84683325484fa874963fa.png",alt:"Image from Gyazo"})),(0,n.kt)("h3",{id:"get-the-api-token"},"Get the API token"),(0,n.kt)("p",null,"Access ",(0,n.kt)("a",{parentName:"p",href:"https://developer.chatwork.com/docs"},"Chatwork API\u3078\u3088\u3046\u3053\u305d\uff01")," and click ","[Apply for API Usage]"," at the bottom of the page.  "),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/a72c21d193266d90d3072e1a0293be9e.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/a72c21d193266d90d3072e1a0293be9e.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Log in with the bot account, and you will be redirected to the ",(0,n.kt)("a",{parentName:"p",href:"https://www.chatwork.com/service/packages/chatwork/subpackages/api/token.php"},"API Token")," page where you can confirm the API token."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/f86ab5b2522ab3b034e7d3b2549a1dea.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/f86ab5b2522ab3b034e7d3b2549a1dea.png",alt:"Image from Gyazo"})),(0,n.kt)("h2",{id:"kuroco-settings"},"Kuroco settings"),(0,n.kt)("h3",{id:"save-the-api-token"},"Save the API token"),(0,n.kt)("p",null,'Access the Kuroco management screen and In the left sidebar menu, under "SETTINGS", click ',"[Environment]"," -> ","[Secrets]","."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/57c492bf4736d7276b41f960360b83cc.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/57c492bf4736d7276b41f960360b83cc.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Click on ","[Add]","."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/53708c3495a35fd72fdeea9266ebc64a.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/53708c3495a35fd72fdeea9266ebc64a.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Enter the following information and click on ","[Add]","."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Field"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Name"),(0,n.kt)("td",{parentName:"tr",align:"left"},"CHATWORK_API_TOKEN")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Value"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The API token obtained from Chatwork")))),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/a26c3e440fdd2d742538210524eaebe9.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/a26c3e440fdd2d742538210524eaebe9.png",alt:"Image from Gyazo"})),(0,n.kt)("h3",{id:"create-a-custom-process-to-post-to-chatwork"},"Create a custom process to post to Chatwork"),(0,n.kt)("p",null,"Create a custom process to post to Chatwork using custom processing.  "),(0,n.kt)("p",null,"Click ","[Operations]"," -> ","[Custom Processing]","."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/cb5f6e5e7baecef758932ce7e380ce79.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/cb5f6e5e7baecef758932ce7e380ce79.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Click ","[Add]","."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/25c556be5f60d1724c15b2942029a68f.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/25c556be5f60d1724c15b2942029a68f.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Configure as follows:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Custom processing assumes that it will be called from other custom processing or batch processing using the ",(0,n.kt)("inlineCode",{parentName:"li"},"{function}")," Smarty plugin."),(0,n.kt)("li",{parentName:"ul"},"It receives the ",(0,n.kt)("inlineCode",{parentName:"li"},"room_id")," and the text to be sent as variables ",(0,n.kt)("inlineCode",{parentName:"li"},"room_id")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"text"),"."),(0,n.kt)("li",{parentName:"ul"},"It returns the result of the processing with ",(0,n.kt)("inlineCode",{parentName:"li"},"{return value=$status}"),".")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Item"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Title"),(0,n.kt)("td",{parentName:"tr",align:"left"},"chatwork_post_message")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Identifier"),(0,n.kt)("td",{parentName:"tr",align:"left"},"chatwork_post_message")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Processing"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The following content")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-smarty",metastring:'reference title="chatwork_post_message"',reference:!0,title:'"chatwork_post_message"'},"https://github.com/diverta/kuroco-documents/blob/main/sample_code/custom_function/function/chatwork_post_message.txt\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/16d9e8df64a3612faf63f04bd5d68b48.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/16d9e8df64a3612faf63f04bd5d68b48.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Once you have entered the information, click ","[Add]"," to add the custom processing."),(0,n.kt)("h3",{id:"edit-message-template"},"Edit message template"),(0,n.kt)("p",null,"Click ","[Operation]"," > ","[Message template]",".  "),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/c35f8c08206815d2ec00116a41e5d07a.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/c35f8c08206815d2ec00116a41e5d07a.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,'Search for "inquiry/inquiry_contact" and click the displayed title ',"[inquiry/inquiry_contact]",".  "),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/1175237184493af0db4fe03d179871fb.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/1175237184493af0db4fe03d179871fb.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,'Add the following at the beginning of the "Body". '),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-smarty"},'{*Chatwork Notification*}\n{capture name=chatwork_text_body}\n[toall]\nAn inquiry has been received for "{$inquiryHeader.inquiry_name}".\nPlease review the details.\n{$smarty.const.ROOT_MNG_URL}/management/inquiry/inquiry_reply_edit/?inquiry_bn_id={$inquiry_bn_id}\n{/capture}\n{function name=\'chatwork_post_message\' room_id="123456789" text=$smarty.capture.chatwork_text_body var=status}\n\n{*Email Notification*}\n')),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/7f596841c03f1aaa1cacd6f3a9bc0914.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/7f596841c03f1aaa1cacd6f3a9bc0914.png",alt:"Image from Gyazo"})),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"Please use the ID of your own environment for ",(0,n.kt)("inlineCode",{parentName:"p"},"room_id"),".")),(0,n.kt)("p",null,"Once the settings are complete, click ","[Update]"," to apply the changes."),(0,n.kt)("h4",{id:"tips"},"TIPS"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'If you want to send the notification only to Chatwork, set "Stop sending email" to "1" from the ',"[custom settings]",".",(0,n.kt)("br",{parentName:"li"}),(0,n.kt)("img",{parentName:"li",src:"https://t.gyazo.com/teams/diverta/e7736ec3bb7a82ed94d9ff6101aa8673.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/e7736ec3bb7a82ed94d9ff6101aa8673.png",alt:"Image from Gyazo"})),(0,n.kt)("li",{parentName:"ul"},"To mention to ",(0,n.kt)("inlineCode",{parentName:"li"},"ToALL")," in Chatwork, write ",(0,n.kt)("inlineCode",{parentName:"li"},"[toall]"),"."),(0,n.kt)("li",{parentName:"ul"},"To mention to an individual in Chatwork, write ",(0,n.kt)("inlineCode",{parentName:"li"},"[To:{account_id}]"),".")),(0,n.kt)("h3",{id:"form-basic-settings"},"Form basic settings"),(0,n.kt)("p",null,"Click ","[Campaign]"," > ","[Form]",".  "),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/9ec2e5ccb02ed42abb2fb9103f4aab9e.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/9ec2e5ccb02ed42abb2fb9103f4aab9e.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Click the title of the form.",(0,n.kt)("br",{parentName:"p"}),"\n",(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/e5fa7e42ece403d05127e135ff7770d7.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/e5fa7e42ece403d05127e135ff7770d7.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"On the basic settings tab, check ","[Notify]"," and enter the email address and title.  "),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/7e43b9be23edadd6fdecaa2c3d24a2d4.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/7e43b9be23edadd6fdecaa2c3d24a2d4.png",alt:"Image from Gyazo"})),(0,n.kt)("h2",{id:"confirmation-of-operation"},"Confirmation of operation"),(0,n.kt)("p",null,"Finally, perform a test to confirm the operation.\nWhen you submit an answer to a form with notification to the administrator enabled, a notification will be sent to the email and also to the Chatwork channel."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/d88180ad9015d00ec95b9cf745901f7a.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/d88180ad9015d00ec95b9cf745901f7a.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"With this, you can send inquiry notifications to Chatwork.\nYou can also post to ChatWork triggered by any action in Kuroco using the same method. Please try it out."),(0,n.kt)("h2",{id:"related-documents"},"Related Documents"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/tutorials/setting-up-inquiry-forms/"},"Setting up inquiry forms with Kuroco and Nuxt.js")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/faq/can-i-customize-my-thank-you-e-mail/"},"Can I customize my thank-you e-mails?")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/reference/mail-variables/"},"List of available variables in the Message template")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/reference/smarty-plugin/"},"Smarty Plugin"))))}d.isMDXComponent=!0}}]);