"use strict";(self.webpackChunkkurokuro=self.webpackChunkkurokuro||[]).push([[87180],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>u});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),s=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=s(e.components);return n.createElement(d.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,d=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=s(a),g=r,u=m["".concat(d,".").concat(g)]||m[g]||c[g]||i;return a?n.createElement(u,o(o({ref:t},p),{},{components:a})):n.createElement(u,o({ref:t},p))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=g;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l[m]="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"},75614:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var n=a(87462),r=(a(67294),a(3905));const i={title:"Implementing view-based page rankings in Google Analytics",description:"This tutorial explains how to display page rankings for the past week based on the number of views of the details page of a specified content structure."},o=void 0,l={unversionedId:"tutorials/how-to-implement-ranking-with-google-analytics",id:"tutorials/how-to-implement-ranking-with-google-analytics",title:"Implementing view-based page rankings in Google Analytics",description:"This tutorial explains how to display page rankings for the past week based on the number of views of the details page of a specified content structure.",source:"@site/docs/tutorials/how-to-implement-ranking-with-google-analytics.md",sourceDirName:"tutorials",slug:"/tutorials/how-to-implement-ranking-with-google-analytics",permalink:"/docs/tutorials/how-to-implement-ranking-with-google-analytics",draft:!1,editUrl:"https://github.com/diverta/kuroco-documents/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials/how-to-implement-ranking-with-google-analytics.md",tags:[],version:"current",frontMatter:{title:"Implementing view-based page rankings in Google Analytics",description:"This tutorial explains how to display page rankings for the past week based on the number of views of the details page of a specified content structure."},sidebar:"documentationSidebar",previous:{title:"How to link Google Analytics",permalink:"/docs/tutorials/how-to-link-google-analytics"},next:{title:"Integrating with VAddy - Automated API endpoint diagnostics",permalink:"/docs/tutorials/integrating-with-vaddy"}},d={},s=[{value:"Integrate GA with Kuroco from the admin panel",id:"integrate-ga-with-kuroco-from-the-admin-panel",level:2},{value:"Set the custom dimensions",id:"set-the-custom-dimensions",level:2},{value:"Embed Google tags on the front-end site",id:"embed-google-tags-on-the-front-end-site",level:2},{value:"Set up an additional field for page views in your content structure",id:"set-up-an-additional-field-for-page-views-in-your-content-structure",level:2},{value:"Confirming PV Count via API",id:"confirming-pv-count-via-api",level:2},{value:"Set the number of page views retrieved as content data",id:"set-the-number-of-page-views-retrieved-as-content-data",level:2},{value:"Available parameters",id:"available-parameters",level:3},{value:"Create a list API to retrieve the views of 10 pages in descending order for ranking generation",id:"create-a-list-api-to-retrieve-the-views-of-10-pages-in-descending-order-for-ranking-generation",level:2}],p={toc:s},m="wrapper";function c(e){let{components:t,...a}=e;return(0,r.kt)(m,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"To implement a ranking based on the number of page views in Google Analytics (GA), you need to do the following:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#1-integrate-ga-with-kuroco-from-the-admin-panel"},"Integrate GA with Kuroco from the admin panel")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#2-set-the-custom-dimensions"},"Set the custom dimensions")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#3-embed-google-tags-on-the-frontend-site"},"Embed Google tags on the front-end site")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#4-set-up-an-additional-field-for-page-views-in-your-content-structure"},"Set up an additional field for page views in your content structure")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#5-set-the-number-of-page-views-retrieved-as-content-data"},"Set the number of page views retrieved as content data")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#6-create-a-list-api-to-retrieve-the-views-of-10-pages-in-descending-order-for-ranking-generation"},"Create a list API to retrieve the views of 10 pages in descending order for ranking generation"))),(0,r.kt)("h2",{id:"integrate-ga-with-kuroco-from-the-admin-panel"},"Integrate GA with Kuroco from the admin panel"),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"/docs/tutorials/how-to-link-google-analytics/"},"Tutorial: How to link Google Analytics")," for a detailed guide."),(0,r.kt)("h2",{id:"set-the-custom-dimensions"},"Set the custom dimensions"),(0,r.kt)("p",null,"Set either content ID or slug as a custom dimension value, based on your front-end configurations. Either option is fine, since both are used to specify the viewed content."),(0,r.kt)("p",null,"Example using ",(0,r.kt)("inlineCode",{parentName:"p"},"slug"),":"),(0,r.kt)("p",null,"Please set the dimension name to any meaningful and understandable name of your choice."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/c70e96f05e084d454d0d8ad84669486d.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/c70e96f05e084d454d0d8ad84669486d.png",alt:"Image from Gyazo"})),(0,r.kt)("h2",{id:"embed-google-tags-on-the-front-end-site"},"Embed Google tags on the front-end site"),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"/docs/tutorials/how-to-link-google-analytics/"},"Tutorial: How to link Google Analytics")," for a detailed guide on how to configure the front-end.\u3000"),(0,r.kt)("p",null,"In this tutorial, we will only retrieve the page views for the content pages we want to rank. Therefore, we will send the ",(0,r.kt)("inlineCode",{parentName:"p"},"page_view")," event as a mounted embedding:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:"[Mounting on the content page]","[Mounting":!0,on:!0,the:!0,content:!0,"page]":!0},"if (process.browser) {\n    const slug = this.$route.params.asset_name // Retrieve slug from page URL, etc.\n    this.$gtag('event', 'page_view', {\n        'detail_page_slug': slug\n    })\n}\n")),(0,r.kt)("p",null,"At this stage, please check the frontend display and if the page_view event is being sent correctly, you can confirm the number of page views as shown below by specifying the custom dimension in the GA console.",(0,r.kt)("br",{parentName:"p"}),"\n","\u203b It may take about half a day for the data to accumulate. If you want to check immediately, you can use real-time tracking to verify the parameters of the page_view event."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/d0a738ffc23fa88f79cb09f67a68ed2a.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/d0a738ffc23fa88f79cb09f67a68ed2a.png",alt:"Image from Gyazo"})),(0,r.kt)("h2",{id:"set-up-an-additional-field-for-page-views-in-your-content-structure"},"Set up an additional field for page views in your content structure"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/c4175daa61e0dd9069a7d87f33f3bb69.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/c4175daa61e0dd9069a7d87f33f3bb69.png",alt:"Image from Gyazo"}),"\n","*","Make sure you select ","[Counter]"," as the field type.",(0,r.kt)("br",{parentName:"p"}),"\n","*","The identifier value entered here will be used when setting the page views in the contents module."),(0,r.kt)("h2",{id:"confirming-pv-count-via-api"},"Confirming PV Count via API"),(0,r.kt)("p",null,"You can verify if you can retrieve the PV count via API by using ",(0,r.kt)("a",{parentName:"p",href:"https://ga-dev-tools.google/ga4/query-explorer/"},"https://ga-dev-tools.google/ga4/query-explorer/"),"."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Select ",(0,r.kt)("inlineCode",{parentName:"li"},"GA4"),' from the toggle switch under "Demos & Tools" on the top left.'),(0,r.kt)("li",{parentName:"ol"},"Choose the target property from ",(0,r.kt)("inlineCode",{parentName:"li"},"Select property"),"."),(0,r.kt)("li",{parentName:"ol"},"Set the values for ",(0,r.kt)("inlineCode",{parentName:"li"},"dateRanges"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"dimensions"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"metrics"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"limit"),", and ",(0,r.kt)("inlineCode",{parentName:"li"},"orderBys"),".\nFor ",(0,r.kt)("inlineCode",{parentName:"li"},"dimensions"),', specify "customEvent:',"[your custom dimension slug]",'".\n',(0,r.kt)("img",{parentName:"li",src:"https://t.gyazo.com/teams/diverta/8f3ce7047cef7256bf7e452b78a53e61.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/8f3ce7047cef7256bf7e452b78a53e61.png",alt:"Image from Gyazo"})),(0,r.kt)("li",{parentName:"ol"},"Execute the Google Analytics Data API by clicking ","[MAKE REQUEST]",".\n",(0,r.kt)("img",{parentName:"li",src:"https://t.gyazo.com/teams/diverta/114056816ebfc68a103614f620244b40.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/114056816ebfc68a103614f620244b40.png",alt:"Image from Gyazo"}))),(0,r.kt)("h2",{id:"set-the-number-of-page-views-retrieved-as-content-data"},"Set the number of page views retrieved as content data"),(0,r.kt)("p",null,"Create a batch process as follows to execute SmartyPlugin and set the page views retrieved as content data:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"{*Retrieve page view count from GA and set it in the counter*}\n{googleanalytics var=result\nupdate_column_slug=\"pv\"\nupdate_target_dimension=\"customEvent:detail_page_slug\"\nupdated_topics_ids='updated_topics_ids'\ntopics_group_id=1}{*Enter the target content structure ID as the topics_group_id*}\n\n{*Reflects data from the counter in the contents data*}\n{assign_array var=ext_data values=''}\n{assign var=ext_data.topics_ids value=$updated_topics_ids}\n{batch module='topics' name='sync_counter' ext_data=$ext_data}\n")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/a3ce48a5c018a6cc111bc1d7c1fe24b1.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/a3ce48a5c018a6cc111bc1d7c1fe24b1.png",alt:"Image from Gyazo"}),(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/62c71a67b6dc35a63715ee197b8ec2f1.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/62c71a67b6dc35a63715ee197b8ec2f1.png",alt:"Image from Gyazo"})),(0,r.kt)("h3",{id:"available-parameters"},"Available parameters"),(0,r.kt)("p",null,"The following parameters are available for the GA plugin:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"var")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Variable name assigned to the retrieved result")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"viewId")),(0,r.kt)("td",{parentName:"tr",align:"left"},"View ID in GA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"update_column_slug")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Slug of the column to be updated")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"update_column_index")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Number of columns to be updated (for repeating columns)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"update_target_metric")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Metric used (default: ",(0,r.kt)("inlineCode",{parentName:"td"},"ga:pageviews"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"update_target_dimension")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Dimension used (default: ",(0,r.kt)("inlineCode",{parentName:"td"},"ga:pagePath"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"topics_group_id")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Target content structure ID")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"startDate")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Counter start date (default: ",(0,r.kt)("inlineCode",{parentName:"td"},"7 days ago"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"endDate")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Counter end date (default: ",(0,r.kt)("inlineCode",{parentName:"td"},"today"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"queries")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Direct query specifications")))),(0,r.kt)("h2",{id:"create-a-list-api-to-retrieve-the-views-of-10-pages-in-descending-order-for-ranking-generation"},"Create a list API to retrieve the views of 10 pages in descending order for ranking generation"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Category"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Content")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Model"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Topics")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Operation"),(0,r.kt)("td",{parentName:"tr",align:"left"},"list")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Parameter"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("ul",null,(0,r.kt)("li",null,"topics_group_id: ",(0,r.kt)("inlineCode",{parentName:"td"},"(target content structure ID)")),(0,r.kt)("li",null,"cnt: ",(0,r.kt)("inlineCode",{parentName:"td"},"10")),(0,r.kt)("li",null,"order_query: ",(0,r.kt)("inlineCode",{parentName:"td"},"pv:desc"))))))))}c.isMDXComponent=!0}}]);