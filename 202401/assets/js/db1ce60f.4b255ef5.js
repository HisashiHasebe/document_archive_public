"use strict";(self.webpackChunkkurokuro=self.webpackChunkkurokuro||[]).push([[76103],{3905:(t,e,n)=>{n.d(e,{Zo:()=>u,kt:()=>f});var o=n(67294);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var s=o.createContext({}),l=function(t){var e=o.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):r(r({},e),t)),n},u=function(t){var e=l(t.components);return o.createElement(s.Provider,{value:e},t.children)},m="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return o.createElement(o.Fragment,{},e)}},p=o.forwardRef((function(t,e){var n=t.components,a=t.mdxType,i=t.originalType,s=t.parentName,u=c(t,["components","mdxType","originalType","parentName"]),m=l(n),p=a,f=m["".concat(s,".").concat(p)]||m[p]||d[p]||i;return n?o.createElement(f,r(r({ref:e},u),{},{components:n})):o.createElement(f,r({ref:e},u))}));function f(t,e){var n=arguments,a=e&&e.mdxType;if("string"==typeof t||a){var i=n.length,r=new Array(i);r[0]=p;var c={};for(var s in e)hasOwnProperty.call(e,s)&&(c[s]=e[s]);c.originalType=t,c[m]="string"==typeof t?t:a,r[1]=c;for(var l=2;l<i;l++)r[l]=n[l];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},31266:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var o=n(87462),a=(n(67294),n(3905));const i={title:"Send automated notifications for new content using a custom function",category:"Operation",weight:1},r=void 0,c={unversionedId:"tutorials/how-to-implement-original-function-into-the-middle-of-processing-by-using-function",id:"tutorials/how-to-implement-original-function-into-the-middle-of-processing-by-using-function",title:"Send automated notifications for new content using a custom function",description:"This tutorial explains how to execute a custom function within a specific process. The function can send notifications and register data outside the timing of a standard function.",source:"@site/docs/tutorials/how-to-implement-original-function-into-the-middle-of-processing-by-using-function.md",sourceDirName:"tutorials",slug:"/tutorials/how-to-implement-original-function-into-the-middle-of-processing-by-using-function",permalink:"/docs/tutorials/how-to-implement-original-function-into-the-middle-of-processing-by-using-function",draft:!1,editUrl:"https://github.com/diverta/kuroco-documents/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials/how-to-implement-original-function-into-the-middle-of-processing-by-using-function.md",tags:[],version:"current",frontMatter:{title:"Send automated notifications for new content using a custom function",category:"Operation",weight:1},sidebar:"documentationSidebar",previous:{title:"Overwriting request values passed to API main processes using custom functions",permalink:"/docs/tutorials/how-to-overwrite-request-for-api-main-process-by-using-function"},next:{title:"Customize CSV data structure output using Custom Function",permalink:"/docs/tutorials/how-to-implement-original-function-into-the-postprocess"}},s={},l=[{value:"Creating the custom function",id:"creating-the-custom-function",level:2},{value:"1. Go to the function list screen",id:"1-go-to-the-function-list-screen",level:3},{value:"2. Go to the Custom function editor screen",id:"2-go-to-the-custom-function-editor-screen",level:3},{value:"3. Enter a title and a Identifier",id:"3-enter-a-title-and-a-identifier",level:3},{value:"4. Specify the components that use the custom function",id:"4-specify-the-components-that-use-the-custom-function",level:3},{value:"5. Write the code for the custom function",id:"5-write-the-code-for-the-custom-function",level:3},{value:"6. Save the custom function",id:"6-save-the-custom-function",level:3},{value:"Verifying the notification delivery",id:"verifying-the-notification-delivery",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Note",id:"note",level:2}],u={toc:l},m="wrapper";function d(t){let{components:e,...n}=t;return(0,a.kt)(m,(0,o.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This tutorial explains how to execute a custom function within a specific process. The function can send notifications and register data outside the timing of a standard function.  "),(0,a.kt)("p",null,"Below, we implement an automatic notification system for new content.  "),(0,a.kt)("h2",{id:"creating-the-custom-function"},"Creating the custom function"),(0,a.kt)("p",null,"First, create the custom function."),(0,a.kt)("h3",{id:"1-go-to-the-function-list-screen"},"1. Go to the function list screen"),(0,a.kt)("p",null,"In the left sidebar menu, click ","[Operation]"," -> ","[Custom function]","."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/473fb10a44bbc44ae52a87b6acdd69a4.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/473fb10a44bbc44ae52a87b6acdd69a4.png",alt:"Image from Gyazo"})),(0,a.kt)("h3",{id:"2-go-to-the-custom-function-editor-screen"},"2. Go to the Custom function editor screen"),(0,a.kt)("p",null,"Click the ","[Add]"," button at the upper right corner of the screen."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/e508cad99d245c3f73a3506f0168bb88.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/e508cad99d245c3f73a3506f0168bb88.png",alt:"Image from Gyazo"})),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/ed8b191f7e9af744141c2fe8888fd0ec.jpg?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/ed8b191f7e9af744141c2fe8888fd0ec.jpg",alt:"Image from Gyazo"})),(0,a.kt)("h3",{id:"3-enter-a-title-and-a-identifier"},"3. Enter a title and a Identifier"),(0,a.kt)("p",null,"To create your custom function, first enter a title and a Identifier:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Title: Send e-mail when content is added in ID29"),(0,a.kt)("li",{parentName:"ul"},"Identifier: sample1_trigger")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"The title and Identifier have to be unique (That is, two custom functions cannot have the same title and Identifier). For example, you can name the custom function after the endpoint used to implement it.")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/8e9f42d1690b305ebe882086a3f80d89.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/8e9f42d1690b305ebe882086a3f80d89.png",alt:"Image from Gyazo"})),(0,a.kt)("h3",{id:"4-specify-the-components-that-use-the-custom-function"},"4. Specify the components that use the custom function"),(0,a.kt)("p",null,'Next, fill out the "Used by component(s)" field as follows:  '),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Trigger: After adding content"),(0,a.kt)("li",{parentName:"ul"},"Text field*\uff1a29")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/d9bc7c28fc750160e90affcb42f4f0a1.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/d9bc7c28fc750160e90affcb42f4f0a1.png",alt:"Image from Gyazo"})),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Fill in the text field with the ID of the topic group you want to implement the custom function for. You can find the topic group ID on the ",(0,a.kt)("a",{parentName:"p",href:"https://t.gyazo.com/teams/diverta/0bb0e9d378978036ec8aa6796cac3b13.png"},"content structure list screen"),". In this example, 29 is the ID of the group created in the ",(0,a.kt)("a",{parentName:"p",href:"/docs/tutorials/adding-a-topics/"},"Creating topic group(s)")," tutorial. Adding new content to the group will trigger the execution of the custom function.  ")),(0,a.kt)("h3",{id:"5-write-the-code-for-the-custom-function"},"5. Write the code for the custom function"),(0,a.kt)("p",null,"After specifying the components, write the code to send an automated e-mail to the editor. First, compose the subject and body of the e-mail. You can use the following variable:  "),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"variable name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"type"),(0,a.kt)("th",{parentName:"tr",align:"left"},"description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"$topicsData"),(0,a.kt)("td",{parentName:"tr",align:"left"},"object"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Content data")))),(0,a.kt)("p",null,"Copy the following code into your editor:  "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-smarty"},"{* Contents data *}\n{assign_array var='method_params'                  values=''}\n{assign_array var='method_params.topics_group_id'  values=''}\n{assign       var='method_params.topics_group_id.' value=29}{* Set the content structure ID when setting the trigger *}\n{assign       var='method_params.cnt'              value=1}\n{assign_array var='method_params.topics_id'        values=''}\n{assign       var='method_params.topics_id.'       value=$topics_id}\n{assign       var='method_params.ignore_open_flg'  value=1}{* Unpubliushed data is also getting *}\n{api_method\n    var='topics_list'\n    model='Topics' method='list' version='1'\n    method_params=$method_params}\n{assign var='topicsData' value=$topics_list.list.0}\n\n{* Title *}\n{assign var=mail_subject value=$topicsData.subject}\n{* Body *}\n{capture name=mail_body}\nNew content has been added.  \n\nFor details, please check below:\n{$smarty.const.ROOT_MNG_URL}/management/topics/topics_edit/?topics_id={$topicsData.topics_id}\n{/capture}\n{assign var=mail_body value=$smarty.capture.mail_body}\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/bff307a940f601e99c36e0f1cc8f8e90.jpg?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/bff307a940f601e99c36e0f1cc8f8e90.jpg",alt:"Image from Gyazo"})),(0,a.kt)("p",null,"Next, implement the e-mail delivery process. Copy the following code into your editor, replacing ",(0,a.kt)("inlineCode",{parentName:"p"},"YOUR_MAIL_ADDRESS@example.com")," with your actual e-mail address:  "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-smarty"},"{sendmail \n to='YOUR_MAIL_ADDRESS@example.com'\n subject=$mail_subject\n contents=$mail_body}\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/759194bbb065b94fd92bc9f95201984f.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/759194bbb065b94fd92bc9f95201984f.png",alt:"Image from Gyazo"})),(0,a.kt)("h3",{id:"6-save-the-custom-function"},"6. Save the custom function"),(0,a.kt)("p",null,"Now you have finished creating the custom function. Click ","[Add]"," to save these settings.  "),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/98f696643ccc78694a0ef32411da8d02.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/98f696643ccc78694a0ef32411da8d02.png",alt:"fetched from Gyazo"})),(0,a.kt)("h2",{id:"verifying-the-notification-delivery"},"Verifying the notification delivery"),(0,a.kt)("p",null,"To verify if the above custom function works, follow the steps below:"),(0,a.kt)("p",null,"In the left sidebar menu, click ","[Content structure]",". On the content structure list screen, click ","[Add]"," next to the group you created the custom function for.",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/8e538c63a188d817b80da1a7ca06b8de.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/8e538c63a188d817b80da1a7ca06b8de.png",alt:"Image from Gyazo"})),(0,a.kt)("p",null,"On the content editor screen, enter the topic contents and click ","[Add]",".",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/e25f18d6d3ea38777f2220cf59aa5ce7.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/e25f18d6d3ea38777f2220cf59aa5ce7.png",alt:"fetched from Gyazo"}),"\nThe system will send the notification e-mail to the address specified in the custom function.",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/ee1dab58a02b4abab3be193e897b35cf.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/ee1dab58a02b4abab3be193e897b35cf.png",alt:"fetched from Gyazo"})),(0,a.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,a.kt)("p",null,"If you did not receive the e-mail notification, refer to the FAQ below:  "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/faq/how-do-i-fix-email-delivery-failure/"},"How to I fix e-mail delivery failure?"))),(0,a.kt)("h2",{id:"note"},"Note"),(0,a.kt)("p",null,'Two custom functions cannot share the same caller. This tutorial configured the "Used by component(s)" field as follows:  '),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Trigger: After adding content"),(0,a.kt)("li",{parentName:"ul"},"Text field\uff1a29")),(0,a.kt)("p",null,"Please ensure that you do not use these settings for other custom functions."))}d.isMDXComponent=!0}}]);