"use strict";(self.webpackChunkkurokuro=self.webpackChunkkurokuro||[]).push([[9959],{3905:(t,e,n)=>{n.d(e,{Zo:()=>c,kt:()=>u});var a=n(67294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var s=a.createContext({}),p=function(t){var e=a.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},c=function(t){var e=p(t.components);return a.createElement(s.Provider,{value:e},t.children)},d="mdxType",m={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},f=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,o=t.originalType,s=t.parentName,c=l(t,["components","mdxType","originalType","parentName"]),d=p(n),f=r,u=d["".concat(s,".").concat(f)]||d[f]||m[f]||o;return n?a.createElement(u,i(i({ref:e},c),{},{components:n})):a.createElement(u,i({ref:e},c))}));function u(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var o=n.length,i=new Array(o);i[0]=f;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=t,l[d]="string"==typeof t?t:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}f.displayName="MDXCreateElement"},76814:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const o={title:"Post-processing",category:"api en",weight:1},i=void 0,l={unversionedId:"reference/post-processing",id:"reference/post-processing",title:"Post-processing",description:"Post-processing refers to any user-defined processes performed on the default endpoint output after the main API process has been executed.",source:"@site/docs/reference/post-processing.md",sourceDirName:"reference",slug:"/reference/post-processing",permalink:"/docs/reference/post-processing",draft:!1,editUrl:"https://github.com/diverta/kuroco-documents/tree/main/packages/create-docusaurus/templates/shared/docs/reference/post-processing.md",tags:[],version:"current",frontMatter:{title:"Post-processing",category:"api en",weight:1},sidebar:"documentationSidebar",previous:{title:"Pre-processing",permalink:"/docs/reference/pre-processing"},next:{title:"Using the filter query function",permalink:"/docs/reference/filter-query"}},s={},p=[{value:"Post-processing settings",id:"post-processing-settings",level:2},{value:"Block types",id:"block-types",level:3},{value:"Allow list",id:"allow-list",level:3},{value:"Field settings",id:"field-settings",level:4},{value:"Example scenario",id:"example-scenario",level:4},{value:"Convert list",id:"convert-list",level:3},{value:"Field settings",id:"field-settings-1",level:4},{value:"Transformation processes",id:"transformation-processes",level:4},{value:"Example scenario",id:"example-scenario-1",level:4},{value:"Custom function",id:"custom-function",level:3},{value:"Custom function creation",id:"custom-function-creation",level:4},{value:"Linking the function to the target endpoint",id:"linking-the-function-to-the-target-endpoint",level:4},{value:"Post-processing variables",id:"post-processing-variables",level:2},{value:"When in trouble",id:"when-in-trouble",level:2}],c={toc:p},d="wrapper";function m(t){let{components:e,...n}=t;return(0,r.kt)(d,(0,a.Z)({},c,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Post-processing refers to any user-defined processes performed on the default endpoint output after the main API process has been executed."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Since such processes are not reflected in the API information (Swagger UI) screen or ",(0,r.kt)("inlineCode",{parentName:"p"},"openapi.json")," file (for ",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/external-api-integration-guide/#openapi-users"},"OpenAPI users"),"), there may be differences between the displayed information and the actual specifications. Therefore, we recommend that you note the custom specifications in the ",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/endpoint-settings/"},"endpoint description"),".")),(0,r.kt)("p",null,"You can access the post-processing settings for each endpoint by clicking ","[Post-processing]"," in the corresponding row:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/2ebc65ea2380bf5897b318da827383ff.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/2ebc65ea2380bf5897b318da827383ff.png",alt:"Image from Gyazo"})),(0,r.kt)("h2",{id:"post-processing-settings"},"Post-processing settings"),(0,r.kt)("p",null,"Post-processes are broken down into blocks. You may define any number of processing blocks, which will be executed in a series based on the order of definition.",(0,r.kt)("br",{parentName:"p"}),"\n","Each block takes the results of the execution of the previous block as input. Click ","[Add]"," to append a new empty block at the end of the series."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/b0909422529d2f3399388bbc963434a3.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/b0909422529d2f3399388bbc963434a3.png",alt:"Image from Gyazo"})),(0,r.kt)("h3",{id:"block-types"},"Block types"),(0,r.kt)("p",null,"Currently, Kuroco supports three types of blocks:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Block name"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Allow list"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Whitelist filter. Define a list of fields to retain in the output - all other fields will be omitted.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Convert list"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Option to remove a field, rename its key, and/or to apply a function (from the list of predefined functions) to its value.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Custom function"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Write the program as a function and link it to the endpoint (similar to post-processing).")))),(0,r.kt)("p",null,"See below for the details of each type."),(0,r.kt)("h3",{id:"allow-list"},"Allow list"),(0,r.kt)("p",null,"The allow list is a simple field filter. A ",(0,r.kt)("inlineCode",{parentName:"p"},"list")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"details")," API returns a lot of information, some of which you may wish to make optional or hidden from users."),(0,r.kt)("p",null,"You can think of it as a whitelist: only the fields you set here will be returned. Therefore, you should list all the fields used by your front-end application."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"For a blacklist feature instead of a whitelist, see ",(0,r.kt)("a",{parentName:"p",href:"#convert-list"},"Convert list"),".")),(0,r.kt)("h4",{id:"field-settings"},"Field settings"),(0,r.kt)("p",null,"Specify the full path to the field in the JSON output, starting from the root. Skip over arrays and only specify objects - the filter will be applied to all objects in an array."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"If your allow list does not specify any field or contains an error in the path name, the endpoint will output an empty JSON object.")),(0,r.kt)("h4",{id:"example-scenario"},"Example scenario"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Original Output"',title:'"Original','Output"':!0},'{\n  "list": [\n    {\n      "subject": "First article",\n      "contents": "The contents of the first article",\n      "sponsors": ["Company X"]\n    },\n    {\n      "subject": "Second article",\n      "contents": "The contents of the second article",\n      "sponsors": ["Company Y"]\n    }\n  ],\n  "pageInfo": {\n    "totalCnt": 7,\n    "pageNo": 1,\n    ...\n  }\n}\n')),(0,r.kt)("p",null,"For example, in the above sample code, we would like to remove ",(0,r.kt)("inlineCode",{parentName:"p"},"sponsors")," only."),(0,r.kt)("p",null,"The three fields we are keeping, including all root and child fields, are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"list.subject")," "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"list.contents")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"pageInfo"))),(0,r.kt)("p",null,"Your configuration should look like this:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/c7c1d55dd8d23185cd9768fc41f1f42b.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/c7c1d55dd8d23185cd9768fc41f1f42b.png",alt:"Image from Gyazo"})),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Make sure to denote nested JSON objects using ",(0,r.kt)("inlineCode",{parentName:"p"},".")," and ignore all arrays.")),(0,r.kt)("p",null,"The drawback to this simple filter is a lack of flexibility. If you need more in-depth customization, see ",(0,r.kt)("a",{parentName:"p",href:"#convert-list"},"Convert list")," and ",(0,r.kt)("a",{parentName:"p",href:"#custom-function"},"Custom function"),"."),(0,r.kt)("h3",{id:"convert-list"},"Convert list"),(0,r.kt)("p",null,"This block allows you to add processes to each field by choosing among available options."),(0,r.kt)("p",null,"Click ","[Add field]"," to add a sub-block defining a process for a specific field. Note the two different ","[Delete]"," functions in this block: the one to the right (a) deletes the corresponding sub-block row, while the one at the bottom (b) deletes the entire block."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/35fc94a1c8fc306a9530596ba14f2528.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/35fc94a1c8fc306a9530596ba14f2528.png",alt:"Image from Gyazo"})),(0,r.kt)("h4",{id:"field-settings-1"},"Field settings"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Field"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Specify the field path in the same way as for allow lists, using dot-separated nested objects and skipping over lists. The filter will be applied to all elements in a list.",(0,r.kt)("ul",null,(0,r.kt)("li",null,"Note: If you enter a non-existent field, a new field with this name will be created under the specified parent. Therefore, you can use convert lists to easily add custom static data to your API.")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Remove/copy field"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("ul",null,(0,r.kt)("li",null,"Remove: Enabled this option to remove this field from the response. All other transformations for this sub-block row will be disabled."),(0,r.kt)("li",null,'Select this option and fill in "New name" to create a new field with the specified process. Note: The original field with its ',(0,r.kt)("strong",{parentName:"td"},"original")," value will be preserved.")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"New name"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Specify the new name of the field. A field with the new name will be added to the same parent object.",(0,r.kt)("ul",null,(0,r.kt)("li",null,"Note: This is ",(0,r.kt)("strong",{parentName:"td"},"NOT")," a path, and you cannot use dot notation to set a different nested structure from the original field. For example, an identity transformation of ",(0,r.kt)("inlineCode",{parentName:"td"},"a.b.c.d")," would simply be ",(0,r.kt)("inlineCode",{parentName:"td"},"d"),", and you do not need to specify a new name in this case.")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Process"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Select one or more optional transformation(s) to apply to the field. In cases of multiple transformations, they will be applied in the order of selection. The specific actions of each process are listed ",(0,r.kt)("a",{parentName:"td",href:"#transformation-processes"},"below"),".",(0,r.kt)("ul",null,(0,r.kt)("li",null,"To remove a process, click ","[-]"," next to it.",(0,r.kt)("br",null),(0,r.kt)("img",{parentName:"td",src:"https://t.gyazo.com/teams/diverta/b7162250d5c465a400cc2c191be77987.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/b7162250d5c465a400cc2c191be77987.png",alt:"Image from Gyazo"}))))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Delete"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Remove the current processing sub-block.")))),(0,r.kt)("h4",{id:"transformation-processes"},"Transformation processes"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Process name"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Action(s)"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Null"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Copy the original value as is (no transformation).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Truncate"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Truncate the value to a maximum of N characters. Specify the length in the input box on the right.",(0,r.kt)("ul",null,(0,r.kt)("li",null,(0,r.kt)("strong",{parentName:"td"},"Warning:")," If left blank (or set to ",(0,r.kt)("inlineCode",{parentName:"td"},"0"),"), the max length will default to 10.")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Trim"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Remove all spaces/tabs from the start and the end of the string.",(0,r.kt)("ul",null,(0,r.kt)("li",null,(0,r.kt)("strong",{parentName:"td"},"Warning:")," This function will convert the value into string format.")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Strtotime"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Apply the ",(0,r.kt)("a",{parentName:"td",href:"https://www.php.net/manual/en/function.strtotime.php"},(0,r.kt)("inlineCode",{parentName:"a"},"strtotime")," PHP function")," to the value.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Date format"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Apply the ",(0,r.kt)("a",{parentName:"td",href:"https://www.php.net/manual/en/function.date.php"},(0,r.kt)("inlineCode",{parentName:"a"},"date")," PHP function")," to the value to format it as a Unix timestamp.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"RCMS Date format"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Apply the specialized ",(0,r.kt)("inlineCode",{parentName:"td"},"pg_dateformat2")," function to the value (this function is also available in the custom function code). This gives the same result as Date format.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Uppercase"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Cast every character to its uppercase variant, if any.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Lowercase"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Cast every character to its lowercase variant, if any.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Sprintf"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Apply the ",(0,r.kt)("a",{parentName:"td",href:"https://www.php.net/manual/en/function.sprintf.php"},(0,r.kt)("inlineCode",{parentName:"a"},"sprintf")," PHP function")," to the input. The existing value is used as a second argument, which you can access using ",(0,r.kt)("inlineCode",{parentName:"td"},"%s")," or other specifiers.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Nl2br"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Replace all new lines (",(0,r.kt)("inlineCode",{parentName:"td"},"\\n"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"\\r")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"\\r\\n"),") in a string with ",(0,r.kt)("inlineCode",{parentName:"td"},"<br/>"),". Useful when rendering to html.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"FileSize"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Retrieve the bytesize of a file if it exists at the specified path.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"ImageSize"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Retrieve the bytesize of an image if it exists at the specified path.")))),(0,r.kt)("h4",{id:"example-scenario-1"},"Example scenario"),(0,r.kt)("p",null,"Consider the same sample code as before:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Original Output"',title:'"Original','Output"':!0},'{\n  "list": [\n    {\n      "subject": "First article",\n      "contents": "The contents of the first article",\n      "sponsors": ["Company X"]\n    },\n    {\n      "subject": "Second article",\n      "contents": "The contents of the second article",\n      "sponsors": ["Company Y"]\n    }\n  ],\n  "pageInfo": {\n    "totalCnt": 7,\n    "pageNo": 1,\n    ...\n  }\n}\n')),(0,r.kt)("p",null,"Suppose you want to add a new field called ",(0,r.kt)("inlineCode",{parentName:"p"},"title"),", which contains the uppercase version of the contents of ",(0,r.kt)("inlineCode",{parentName:"p"},"subject"),". Configure your field settings as follows:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Field"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"list.subject"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Remove/copy field"),(0,r.kt)("td",{parentName:"tr",align:"left"},'Select "Copy".')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"New name"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"title"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Process"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Uppercase")))),(0,r.kt)("p",null,"Your configuration should look like this:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/87c34506fb299f52285017bfb7534c08.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/87c34506fb299f52285017bfb7534c08.png",alt:"Image from Gyazo"}),"\nNew output:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Filtered Output"',title:'"Filtered','Output"':!0},'{\n"list":\n  [\n    {\n      "subject": "First article",\n      "contents": "The contents of the first article",\n      "sponsors": [\n        "Company X"\n      ],\n      "title": "FIRST ARTICLE"\n    },\n    {\n      "subject": "Second article",\n      "contents": "The contents of the second article",\n      "sponsors": [\n        "Company Y"\n      ],\n      "title": "SECOND ARTICLE"\n    }\n  ],\n"pageInfo":\n  {\n    "totalCnt": 7,\n    "pageNo": 1\n  }\n}\n')),(0,r.kt)("h3",{id:"custom-function"},"Custom function"),(0,r.kt)("p",null,"If your API requires more in-depth features, write a custom function defining how your data should be transformed and link it to your endpoint."),(0,r.kt)("h4",{id:"custom-function-creation"},"Custom function creation"),(0,r.kt)("p",null,"Please create a custom process to be used in post-processing, referring to the ",(0,r.kt)("a",{parentName:"p",href:"/docs/management/function/#custorm-function-editor"},"custom processing")," as a reference."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/bd5aa3aa781410f063d6234959bfb470.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/bd5aa3aa781410f063d6234959bfb470.png",alt:"Image from Gyazo"}),"\nTo avoid confusion with custom functions used in other modules, we recommend setting it up as follows:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create a ",(0,r.kt)("a",{parentName:"li",href:"/docs/management/function-category/"},"custom function category")," dedicated to post-processing in advance and set it as the category of the function."),(0,r.kt)("li",{parentName:"ul"},"Match the title of the custom function with the path name of the endpoint.")),(0,r.kt)("h4",{id:"linking-the-function-to-the-target-endpoint"},"Linking the function to the target endpoint"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"In the left sidebar menu, click ","[API]"," and select the target ",(0,r.kt)("a",{parentName:"li",href:"/docs/management/api-list"},"endpoint list screen"),"."),(0,r.kt)("li",{parentName:"ol"},"Select the target endpoint from the list and click ","[Post-processing]","."),(0,r.kt)("li",{parentName:"ol"},"In the dropdown list, select ","[Custom function]"," and choose the correct category and function name (list)."),(0,r.kt)("li",{parentName:"ol"},"Click ","[Save]",".")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Double check to make sure you have linked the function correctly. If you made a mistake, the endpoint may not work as expected.")),(0,r.kt)("p",null,"Example configuration:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/c7d79cb73d91b7f3a20722b2a70a1368.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/c7d79cb73d91b7f3a20722b2a70a1368.png",alt:"Image (fetched from Gyazo)"})),(0,r.kt)("h2",{id:"post-processing-variables"},"Post-processing variables"),(0,r.kt)("p",null,"The variables used in post-processing contain reserved words with specific meanings. You can customize the endpoint behavior using these variables."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Variable"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Explanation"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"$json")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Contains the original JSON output of the API.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"$processed_json")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Return"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Assign this variable and include the modified JSON response to overwrite the original.")))),(0,r.kt)("h2",{id:"when-in-trouble"},"When in trouble"),(0,r.kt)("p",null,"If a post-process is not working as expected, verify the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The post-processing custom function has been linked properly."),(0,r.kt)("li",{parentName:"ul"},"You have linked the correct custom function."),(0,r.kt)("li",{parentName:"ul"},"The variable name is correct."),(0,r.kt)("li",{parentName:"ul"},"The variable data is stored in the correct format."),(0,r.kt)("li",{parentName:"ul"},"The custom function contains no syntax errors.")))}m.isMDXComponent=!0}}]);