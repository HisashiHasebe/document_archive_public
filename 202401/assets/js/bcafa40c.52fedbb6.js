"use strict";(self.webpackChunkkurokuro=self.webpackChunkkurokuro||[]).push([[13126],{3905:(t,e,a)=>{a.d(e,{Zo:()=>u,kt:()=>f});var o=a(67294);function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e){if(null==t)return{};var a,o,n=function(t,e){if(null==t)return{};var a,o,n={},i=Object.keys(t);for(o=0;o<i.length;o++)a=i[o],e.indexOf(a)>=0||(n[a]=t[a]);return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)a=i[o],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}var c=o.createContext({}),d=function(t){var e=o.useContext(c),a=e;return t&&(a="function"==typeof t?t(e):r(r({},e),t)),a},u=function(t){var e=d(t.components);return o.createElement(c.Provider,{value:e},t.children)},p="mdxType",s={inlineCode:"code",wrapper:function(t){var e=t.children;return o.createElement(o.Fragment,{},e)}},h=o.forwardRef((function(t,e){var a=t.components,n=t.mdxType,i=t.originalType,c=t.parentName,u=l(t,["components","mdxType","originalType","parentName"]),p=d(a),h=n,f=p["".concat(c,".").concat(h)]||p[h]||s[h]||i;return a?o.createElement(f,r(r({ref:e},u),{},{components:a})):o.createElement(f,r({ref:e},u))}));function f(t,e){var a=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var i=a.length,r=new Array(i);r[0]=h;var l={};for(var c in e)hasOwnProperty.call(e,c)&&(l[c]=e[c]);l.originalType=t,l[p]="string"==typeof t?t:n,r[1]=l;for(var d=2;d<i;d++)r[d]=a[d];return o.createElement.apply(null,r)}return o.createElement.apply(null,a)}h.displayName="MDXCreateElement"},94270:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>s,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var o=a(87462),n=(a(67294),a(3905));const i={title:"Auto Executing Github Actions with update on Contents data.",description:"This tutorial explains how to run GitHub actions when a content is updated."},r=void 0,l={unversionedId:"tutorials/auto-run-github-with-contents-update",id:"tutorials/auto-run-github-with-contents-update",title:"Auto Executing Github Actions with update on Contents data.",description:"This tutorial explains how to run GitHub actions when a content is updated.",source:"@site/docs/tutorials/auto-run-github-with-contents-update.md",sourceDirName:"tutorials",slug:"/tutorials/auto-run-github-with-contents-update",permalink:"/docs/tutorials/auto-run-github-with-contents-update",draft:!1,editUrl:"https://github.com/diverta/kuroco-documents/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials/auto-run-github-with-contents-update.md",tags:[],version:"current",frontMatter:{title:"Auto Executing Github Actions with update on Contents data.",description:"This tutorial explains how to run GitHub actions when a content is updated."},sidebar:"documentationSidebar",previous:{title:"Scheduling updates for published contents",permalink:"/docs/tutorials/scheduling-updates-for-published-contents"},next:{title:"How to use CKEditor Placeholder feature with API and Custom Function",permalink:"/docs/tutorials/how-to-use-ckeditor-placeholder-feature"}},c={},d=[{value:"Overview",id:"overview",level:2},{value:"What you\u2019ll learn",id:"what-youll-learn",level:3},{value:"Before you start",id:"before-you-start",level:3},{value:"Configure GitHub Workflow",id:"configure-github-workflow",level:2},{value:"Create Content with GitHub Actions",id:"create-content-with-github-actions",level:2},{value:"(Optional) Create Content with Approvalflow Workflow as well",id:"optional-create-content-with-approvalflow-workflow-as-well",level:2},{value:"1. Create a Workflow",id:"1-create-a-workflow",level:3},{value:"2. Configure Flow Settings",id:"2-configure-flow-settings",level:3},{value:"3. Create a new topic.",id:"3-create-a-new-topic",level:3},{value:"4. Set GitHub Workflow and Approvalflow.",id:"4-set-github-workflow-and-approvalflow",level:3},{value:"5. Update the Content",id:"5-update-the-content",level:3},{value:"6. Confirm GitHub Actions run.",id:"6-confirm-github-actions-run",level:3},{value:"Create Content with API",id:"create-content-with-api",level:2},{value:"1. Create a Content insert API.",id:"1-create-a-content-insert-api",level:3},{value:"2. Send the Request.",id:"2-send-the-request",level:3},{value:"3. Confirm GitHub Actions run",id:"3-confirm-github-actions-run",level:3}],u={toc:d},p="wrapper";function s(t){let{components:e,...a}=t;return(0,n.kt)(p,(0,o.Z)({},u,a,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"overview"},"Overview"),(0,n.kt)("p",null,"This tutorial explains how to setup and run GitHub actions on updation of Content. This also covers dispatch action with ApprovalFlow and via API."),(0,n.kt)("h3",{id:"what-youll-learn"},"What you\u2019ll learn"),(0,n.kt)("p",null,"Run GitHub actions when a content is updated, you will need to:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#configure-github-workflow"},"Configure GitHub Workflow")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#create-content-with-github-actions"},"Create Content with GitHub Actions")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#optional-create-content-with-approvalflow-workflow-as-well"},"(Optional) Create Content with Approvalflow Workflow as well")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#create-content-with-api"},"Create Content with API"))),(0,n.kt)("h3",{id:"before-you-start"},"Before you start"),(0,n.kt)("p",null,"To use this tutorial, you should have already built your project with Kuroco and Nuxt.js and created a contents list page and configured Kuroco . If you have not yet done so, refer to the tutorials below:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/tutorials/beginners-guide/"},"Beginner's guide to Kuroco"))),(0,n.kt)("p",null,"This tutorial explains how to run GitHub actions when a content is updated with ApprovalFlow."),(0,n.kt)("h2",{id:"configure-github-workflow"},"Configure GitHub Workflow"),(0,n.kt)("p",null,"After you have connected to GitHub and setup the actions YAML file along with Kuroco Select, your GitHub setting screen should look like this."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/af3a8a9d8788718c5b32a8562d44397e.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/af3a8a9d8788718c5b32a8562d44397e.png",alt:"Image from Gyazo"})),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"For GitHub Actions to work, the Workflow needs to be configured on GitHub Connection screen. Without that, Even if the Workflow is linked on the Content, it will not execute GitHub Actions.")),(0,n.kt)("p",null,"You need to set the Workflow and Target branch here. Select the corresponding things based on your GitHub repository and click Update."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/d99b6964f2cc88217849c42eadb62366.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/d99b6964f2cc88217849c42eadb62366.png",alt:"Image from Gyazo"})),(0,n.kt)("h2",{id:"create-content-with-github-actions"},"Create Content with GitHub Actions"),(0,n.kt)("p",null,"Click on Contents from the side menu and select the Content Structure you want to link the Action to and click Add. You can also edit any existing content if you want to link Action Workflow with existing data, in that case it will run the GitHub Action after you have updated the Content."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/6bf3591845eee382e91605ec349dff55.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/6bf3591845eee382e91605ec349dff55.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"You need to select Workflow as Link value.\n",(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/2ee6746005f193150a5fe692e3f05a9c.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/2ee6746005f193150a5fe692e3f05a9c.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Once updated with Workflow as Link, you can see that the GitHub Actions is executed.\n",(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/60e4abe78c8d71a89b74646a9e72bbd4.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/60e4abe78c8d71a89b74646a9e72bbd4.png",alt:"Image from Gyazo"})),(0,n.kt)("h2",{id:"optional-create-content-with-approvalflow-workflow-as-well"},"(Optional) Create Content with Approvalflow Workflow as well"),(0,n.kt)("p",null,"GitHub actions can automatically run when a content is updated. If the workflow is configured on that content then the Action will run when the workflow is completed (all groups have approved and the content is published/updated)."),(0,n.kt)("h3",{id:"1-create-a-workflow"},"1. Create a Workflow"),(0,n.kt)("p",null,"To create a workflow, on the Side Menu, navigate to ","[Operation]"," > ","[Approval Workflow]",". Here you can add a new workflow or edit if already created."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/44227464e3a6c1c883259b6d2c850ddb.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/44227464e3a6c1c883259b6d2c850ddb.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Then proceed to filling required information about the Workflow you want to set."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/ad9d7b13f9d1aba17de93378b12b4d25.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/ad9d7b13f9d1aba17de93378b12b4d25.png",alt:"Image from Gyazo"})),(0,n.kt)("h3",{id:"2-configure-flow-settings"},"2. Configure Flow Settings"),(0,n.kt)("p",null,"You need to set the flow settings on the path from create/update to published of any content."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/92ab955058d991a831182f334ee5f3d0.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/92ab955058d991a831182f334ee5f3d0.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"After the configuration of Workflow. You can proceed to content edit."),(0,n.kt)("h3",{id:"3-create-a-new-topic"},"3. Create a new topic."),(0,n.kt)("p",null,"You need to Navigate to ","[Content]"," > Content Name. From there you can click on ","[Add]"," to create a new content."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/6bf3591845eee382e91605ec349dff55.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/6bf3591845eee382e91605ec349dff55.png",alt:"Image from Gyazo"})),(0,n.kt)("h3",{id:"4-set-github-workflow-and-approvalflow"},"4. Set GitHub Workflow and Approvalflow."),(0,n.kt)("p",null,"GitHub Workflow needs to be linked in order for the GitHub Action to be executed after the content is published. Therefore, Linking of GitHub Workflow is mandatory. You can optionally link Approvalflow Workflow if you want Approval before publishing of that content."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/a3180086be19fc6ff3420926a0fb93ac.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/a3180086be19fc6ff3420926a0fb93ac.png",alt:"Image from Gyazo"})),(0,n.kt)("h3",{id:"5-update-the-content"},"5. Update the Content"),(0,n.kt)("p",null,"If the content is set with Approvalflow Workflow, then it will move to Pending Approval, otherwise it will be directly published and the GitHub Action will be executed."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/99f4b777dbc39cafd0a7b2c385f7fac5.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/99f4b777dbc39cafd0a7b2c385f7fac5.png",alt:"Image from Gyazo"})),(0,n.kt)("h3",{id:"6-confirm-github-actions-run"},"6. Confirm GitHub Actions run."),(0,n.kt)("p",null,"After setting of the Content, GitHub actions will run. They can be confirmed on GitHub as well on the Actions Tab."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/3c607be7f988459a961b4ebac144a6d5.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/3c607be7f988459a961b4ebac144a6d5.png",alt:"Image from Gyazo"}),"\n",(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/6c6b814bb31224e4d6284d910ca9284a.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/6c6b814bb31224e4d6284d910ca9284a.png",alt:"Image from Gyazo"})),(0,n.kt)("h2",{id:"create-content-with-api"},"Create Content with API"),(0,n.kt)("p",null,"With Headless Approach, the GitHub action can be configured to be executed when the content is updated, even when doing so via APIs. For this tutorial's simplicity, we will be using Contents API without Approvalflow. Documentation on adding content with Approvalflow can be found ",(0,n.kt)("a",{parentName:"p",href:"/docs/faq/can-i-add-or-update-workflow-content-via-api/"},"here"),"."),(0,n.kt)("h3",{id:"1-create-a-content-insert-api"},"1. Create a Content insert API."),(0,n.kt)("p",null,"Go to the ","[API]"," and select the API from the side menu. Click on Add to Add a new Engpoint. You can enter information according to the following reference table."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/fe5ad1e70a342959e0163a07a6ec48bb.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/fe5ad1e70a342959e0163a07a6ec48bb.png",alt:"Image from Gyazo"})),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Setting"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Path"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The Path of Endpoint. You can fill according to your requirement.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Model - Category"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Select Content")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Model - Model"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Select Topics with version 1 (That is latest currently).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Model - Operation"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Select the operation which you want to perform on the content.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"topics_group_id"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Enter the topics ID of Content. ",(0,n.kt)("br",null)," For this example, we are using insert operation.")))),(0,n.kt)("h3",{id:"2-send-the-request"},"2. Send the Request."),(0,n.kt)("p",null,"To check the endpoint, you can go to Swagger UI. Select the newly created endpoing and click on Test. Here, if you pass ",(0,n.kt)("inlineCode",{parentName:"p"},"dispatch_github_workflow")," with value as 1. This would configure content to execute GitHub action when it is published. If approvalflow is used, then the Action will be executed after Approvalflow is completed. If the content is set to unpublish or to be published at a later date then the GitHub Action will be executed only when the content is published. For simplicity of this tutorial, we will pass ",(0,n.kt)("inlineCode",{parentName:"p"},"open_flg")," as 1 which would set the content to be published immediately on insert which would trigger the GitHub Action immediately on insertion of the content."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/c2c7ca1316a869ccab94afa988545cd8.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/c2c7ca1316a869ccab94afa988545cd8.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"Here, we can see on the response that the content is added successfully."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/6a1f01292f27da35e3c64bd81330dc38.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/6a1f01292f27da35e3c64bd81330dc38.png",alt:"Image from Gyazo"})),(0,n.kt)("p",null,"You can also go to that particular content list and confirm that the contend is updated. (In this case, inserted)"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/12fc256dcf81352fa0241dbac442d3d5.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/12fc256dcf81352fa0241dbac442d3d5.png",alt:"Image from Gyazo"})),(0,n.kt)("h3",{id:"3-confirm-github-actions-run"},"3. Confirm GitHub Actions run"),(0,n.kt)("p",null,"You can navigate to GitHub repository's Actions tab and confirm that the action is executed."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/8058a89201a49bd18fb1a21a6a7a0ac2.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/8058a89201a49bd18fb1a21a6a7a0ac2.png",alt:"Image from Gyazo"})))}s.isMDXComponent=!0}}]);