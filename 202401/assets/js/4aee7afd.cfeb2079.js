"use strict";(self.webpackChunkkurokuro=self.webpackChunkkurokuro||[]).push([[13630],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>f});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(a),u=i,f=d["".concat(p,".").concat(u)]||d[u]||m[u]||r;return a?n.createElement(f,o(o({ref:t},c),{},{components:a})):n.createElement(f,o({ref:t},c))}));function f(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[d]="string"==typeof e?e:i,o[1]=l;for(var s=2;s<r;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},89248:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var n=a(87462),i=(a(67294),a(3905));const r={title:"Filter function based on related data",description:"Here, we will introduce how to use the filter function to search for related data as a condition. By creating a filter in the format of `:R(%module_name%:q|%filter_query%|)`, you can specify filtering conditions for related information, and you can search flexibly by combining keywords and tags."},o=void 0,l={unversionedId:"reference/r-filter",id:"reference/r-filter",title:"Filter function based on related data",description:"Here, we will introduce how to use the filter function to search for related data as a condition. By creating a filter in the format of `:R(%module_name%:q|%filter_query%|)`, you can specify filtering conditions for related information, and you can search flexibly by combining keywords and tags.",source:"@site/docs/reference/r-filter.md",sourceDirName:"reference",slug:"/reference/r-filter",permalink:"/docs/reference/r-filter",draft:!1,editUrl:"https://github.com/diverta/kuroco-documents/tree/main/packages/create-docusaurus/templates/shared/docs/reference/r-filter.md",tags:[],version:"current",frontMatter:{title:"Filter function based on related data",description:"Here, we will introduce how to use the filter function to search for related data as a condition. By creating a filter in the format of `:R(%module_name%:q|%filter_query%|)`, you can specify filtering conditions for related information, and you can search flexibly by combining keywords and tags."},sidebar:"documentationSidebar",previous:{title:"Using the filter query function",permalink:"/docs/reference/filter-query"},next:{title:"Sorting by Location Information",permalink:"/docs/reference/order-by-location"}},p={},s=[{value:"How to set up",id:"how-to-set-up",level:2},{value:"Preparation",id:"preparation",level:3},{value:"Change in\u3000filtering conditions",id:"change-infiltering-conditions",level:4},{value:"Example of filter specification",id:"example-of-filter-specification",level:3},{value:"Get the tag associated with the contents of topics_group_id=1 using Tag::list API",id:"get-the-tag-associated-with-the-contents-of-topics_group_id1-using-taglist-api",level:4},{value:"Get the content associated with the tag with tag_id=50 using the Topics::list API",id:"get-the-content-associated-with-the-tag-with-tag_id50-using-the-topicslist-api",level:4},{value:"Perform an AND search with a keyword and tag using the Topics::list API",id:"perform-an-and-search-with-a-keyword-and-tag-using-the-topicslist-api",level:4},{value:"Perform an OR search within a specific tag using the Topics::list API, and then perform an AND search for each of the results.",id:"perform-an-or-search-within-a-specific-tag-using-the-topicslist-api-and-then-perform-an-and-search-for-each-of-the-results",level:4},{value:"Available items",id:"available-items",level:2},{value:"Topics",id:"topics",level:3},{value:"Member",id:"member",level:3},{value:"Inquiry",id:"inquiry",level:3},{value:"Tag",id:"tag",level:3}],c={toc:s},d="wrapper";function m(e){let{components:t,...a}=e;return(0,i.kt)(d,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Here, we will introduce how to use the filter function to search for related data as a condition. By creating a filter in the format of ",(0,i.kt)("inlineCode",{parentName:"p"},":R(%module_name%:q|%filter_query%|)"),", you can specify filtering conditions for related information, and you can search flexibly by combining keywords and tags."),(0,i.kt)("h2",{id:"how-to-set-up"},"How to set up"),(0,i.kt)("h3",{id:"preparation"},"Preparation"),(0,i.kt)("p",null,"In order to narrow down related information, first set the modules that are allowed to be used with ",(0,i.kt)("inlineCode",{parentName:"p"},"filter_request_allow_list"),".\nWrite ",(0,i.kt)("inlineCode",{parentName:"p"},"filter_request_allow_list")," in the following format."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},":q|%module_name%:[%column_name1%,%column_name2%]")),(0,i.kt)("p",null,"Example: ",(0,i.kt)("inlineCode",{parentName:"p"},":q|topics:[topics_group_id,subject]"),"\n-> Allow to specify topics_group_id, subject in subquery."),(0,i.kt)("p",null,"You can also specify a subquery with ",(0,i.kt)("inlineCode",{parentName:"p"},":ALL")," like ",(0,i.kt)("inlineCode",{parentName:"p"},":q|tag:[:ALL]"),".\nFor subqueries that can be specified, refer to ",(0,i.kt)("a",{parentName:"p",href:"#available-items"},"Available items"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/691cc9a6ff6bef440aaa544dbbe114b5.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/691cc9a6ff6bef440aaa544dbbe114b5.png",alt:"Image from Gyazo"})),(0,i.kt)("h4",{id:"change-infiltering-conditions"},"Change in\u3000filtering conditions"),(0,i.kt)("p",null,"For Topics, Tag, and Inquiry, the default filtering conditions change according to the allow_list settings."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Topics, Tags",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"If the allow_list does not include open_flg, it searches only open content/tags."),(0,i.kt)("li",{parentName:"ul"},"If the allow_list includes open_flg (or :ALL), it searches including private contents/tags."))),(0,i.kt)("li",{parentName:"ul"},"Inquiries",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"If the allow_list does not include status, it searches only active forms."),(0,i.kt)("li",{parentName:"ul"},"If the allow_list includes status (or :ALL), it searches including inactive forms.")))),(0,i.kt)("h3",{id:"example-of-filter-specification"},"Example of filter specification"),(0,i.kt)("h4",{id:"get-the-tag-associated-with-the-contents-of-topics_group_id1-using-taglist-api"},"Get the tag associated with the contents of topics_group_id=1 using Tag::list API"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"filter"),": ",(0,i.kt)("inlineCode",{parentName:"p"},":R(topics:q|topics_group_id eq 1|)"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"filter_request_allow_list"),": ",(0,i.kt)("inlineCode",{parentName:"p"},":q|topics:[topics_group_id]"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/e9d6485265abd32fcb25cdd3201d7b35.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/e9d6485265abd32fcb25cdd3201d7b35.png",alt:"Image from Gyazo"})),(0,i.kt)("h4",{id:"get-the-content-associated-with-the-tag-with-tag_id50-using-the-topicslist-api"},"Get the content associated with the tag with tag_id=50 using the Topics::list API"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"filter"),": ",(0,i.kt)("inlineCode",{parentName:"p"},":R(tag:q|tag_id in [50]|)"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"filter_request_allow_list"),": ",(0,i.kt)("inlineCode",{parentName:"p"},":q|tag:[tag_id]"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/d18f6ccc76e76c2de3fd1f082f34c922.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/d18f6ccc76e76c2de3fd1f082f34c922.png",alt:"Image from Gyazo"})),(0,i.kt)("h4",{id:"perform-an-and-search-with-a-keyword-and-tag-using-the-topicslist-api"},"Perform an AND search with a keyword and tag using the Topics::list API"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"filter"),": ",(0,i.kt)("inlineCode",{parentName:"p"},'search_keyword contains "test" AND :R(tag:q|tag_id in [50]|)'),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"filter_request_allow_list"),":",(0,i.kt)("inlineCode",{parentName:"p"},"[search_keyword,:q|tag:[tag_id]]"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/131025e31a961fe6cc42892e4a694172.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/131025e31a961fe6cc42892e4a694172.png",alt:"Image from Gyazo"})),(0,i.kt)("h4",{id:"perform-an-or-search-within-a-specific-tag-using-the-topicslist-api-and-then-perform-an-and-search-for-each-of-the-results"},"Perform an OR search within a specific tag using the Topics::list API, and then perform an AND search for each of the results."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"filter"),": ",(0,i.kt)("inlineCode",{parentName:"p"},":R(tag:q|tag_id in [7,8,9]|) AND :R(tag:q|tag_id in [5,6]|)"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"filter_request_allow_list"),": ",(0,i.kt)("inlineCode",{parentName:"p"},":q|tag:[tag_id]"),"\n",(0,i.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/3aa31073451057cc2b9adca975a58037.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/3aa31073451057cc2b9adca975a58037.png",alt:"Image from Gyazo"})),(0,i.kt)("h2",{id:"available-items"},"Available items"),(0,i.kt)("p",null,"Currently, only a limited number of standard fields can be specified in subqueries.",(0,i.kt)("br",{parentName:"p"}),"\n","The available ",(0,i.kt)("inlineCode",{parentName:"p"},"module_name")," and its subqueries (",(0,i.kt)("inlineCode",{parentName:"p"},"column_name"),") are as follows.  "),(0,i.kt)("h3",{id:"topics"},"Topics"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"topics_id"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"topics_group_id"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"contents_type"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"subject"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"open_flg"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"topics_flg"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"regular_flg"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"inst_ymdhi"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"update_ymdhi"),"  "),(0,i.kt)("h3",{id:"member"},"Member"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"member_id"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"group_ids"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"inst_ymdhi"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"update_ymdhi"),"  "),(0,i.kt)("h3",{id:"inquiry"},"Inquiry"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"inquiry_id"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"inquiry_name"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"status"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"inst_ymdhi"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"update_ymdhi"),"  "),(0,i.kt)("h3",{id:"tag"},"Tag"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"tag_id"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"tag_nm"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"open_flg"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"inst_ymdhi"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"update_ymdhi"),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"tag_category_id")))}m.isMDXComponent=!0}}]);