"use strict";(self.webpackChunkkurokuro=self.webpackChunkkurokuro||[]).push([[95605],{3905:(t,e,a)=>{a.d(e,{Zo:()=>c,kt:()=>h});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var p=n.createContext({}),d=function(t){var e=n.useContext(p),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},c=function(t){var e=d(t.components);return n.createElement(p.Provider,{value:e},t.children)},s="mdxType",u={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},m=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,o=t.originalType,p=t.parentName,c=l(t,["components","mdxType","originalType","parentName"]),s=d(a),m=r,h=s["".concat(p,".").concat(m)]||s[m]||u[m]||o;return a?n.createElement(h,i(i({ref:e},c),{},{components:a})):n.createElement(h,i({ref:e},c))}));function h(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var p in e)hasOwnProperty.call(e,p)&&(l[p]=e[p]);l.originalType=t,l[s]="string"==typeof t?t:r,i[1]=l;for(var d=2;d<o;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},58585:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var n=a(87462),r=(a(67294),a(3905));const o={title:"Setting up your OAuth SP(Admin Panel)",description:"Kuroco has the functionality of an OAuth service provider and can implement SSO. In addition, we have prepared several external services as presets, making it easy to configure for supported services. In this tutorial, we will implement login using GitHub as an example of SSO with OAuth authentication."},i=void 0,l={unversionedId:"tutorials/implementing-oauth-sp-based-sso",id:"tutorials/implementing-oauth-sp-based-sso",title:"Setting up your OAuth SP(Admin Panel)",description:"Kuroco has the functionality of an OAuth service provider and can implement SSO. In addition, we have prepared several external services as presets, making it easy to configure for supported services. In this tutorial, we will implement login using GitHub as an example of SSO with OAuth authentication.",source:"@site/docs/tutorials/implementing-oauth-sp-based-sso.md",sourceDirName:"tutorials",slug:"/tutorials/implementing-oauth-sp-based-sso",permalink:"/docs/tutorials/implementing-oauth-sp-based-sso",draft:!1,editUrl:"https://github.com/diverta/kuroco-documents/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials/implementing-oauth-sp-based-sso.md",tags:[],version:"current",frontMatter:{title:"Setting up your OAuth SP(Admin Panel)",description:"Kuroco has the functionality of an OAuth service provider and can implement SSO. In addition, we have prepared several external services as presets, making it easy to configure for supported services. In this tutorial, we will implement login using GitHub as an example of SSO with OAuth authentication."},sidebar:"documentationSidebar",previous:{title:"How to implement SAML based SSO using Google Workspace",permalink:"/docs/tutorials/using-gsuite-to-implement-saml-based-sso"},next:{title:"How to link with SendGrid",permalink:"/docs/tutorials/how-to-link-sendgrid"}},p={},d=[{value:"Overview",id:"overview",level:2},{value:"What you will learn",id:"what-you-will-learn",level:3},{value:"Before you start",id:"before-you-start",level:3},{value:"Kuroco Configuration",id:"kuroco-configuration",level:2},{value:"Add OAuth Service Provider Configuration",id:"add-oauth-service-provider-configuration",level:3},{value:"GitHub Configuration",id:"github-configuration",level:2},{value:"Add OAuth Apps",id:"add-oauth-apps",level:3},{value:"Generate a Secret Key",id:"generate-a-secret-key",level:3},{value:"Update Kuroco OAuth SP Configuration",id:"update-kuroco-oauth-sp-configuration",level:2},{value:"How to Use",id:"how-to-use",level:2},{value:"References",id:"references",level:2},{value:"Where to Obtain Client ID and Secret Key",id:"where-to-obtain-client-id-and-secret-key",level:3},{value:"About Custom",id:"about-custom",level:3}],c={toc:d},s="wrapper";function u(t){let{components:e,...a}=t;return(0,r.kt)(s,(0,n.Z)({},c,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"Kuroco has the functionality of an OAuth service provider and can implement SSO. In addition, we have prepared several external services as presets, making it easy to configure for supported services."),(0,r.kt)("p",null,"In this tutorial, we will implement login under the following conditions as an example of SSO with OAuth authentication:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Login to the Kuroco admin panel"),(0,r.kt)("li",{parentName:"ul"},"Use GitHub OAuth"),(0,r.kt)("li",{parentName:"ul"},"Login to Kuroco with a member who has the same email as GitHub")),(0,r.kt)("h3",{id:"what-you-will-learn"},"What you will learn"),(0,r.kt)("p",null,"You will learn how to implement SSO using OAuth service provider with the following steps."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#kuroco-configuration"},"Kuroco Configuration"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#add-oauth-service-provider-configuration"},"Add OAuth Service Provider Configuration")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#github-configuration"},"GitHub Configuration"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#add-oauth-apps"},"Add OAuth Apps")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#generate-a-secret-key"},"Generate a Secret Key")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#update-kuroco-oauth-sp-configuration"},"Update Kuroco OAuth SP Configuration")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#how-to-use"},"How to Use"))),(0,r.kt)("h3",{id:"before-you-start"},"Before you start"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Due to changes in GitHub specifications, the method of obtaining the Client ID and Client secrets may be different from this tutorial. Please check the latest information on GitHub for details.")),(0,r.kt)("h2",{id:"kuroco-configuration"},"Kuroco Configuration"),(0,r.kt)("h3",{id:"add-oauth-service-provider-configuration"},"Add OAuth Service Provider Configuration"),(0,r.kt)("p",null,"Click ","[External System Integration]"," -> ","[OAuth SP]","."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/f86a92cddf8148623bba3cbda6cf8a5a.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/f86a92cddf8148623bba3cbda6cf8a5a.png",alt:"fetched from Gyazo"})),(0,r.kt)("p",null,"Click ","[Add]","."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/1bcc87559860b066a649e888664e411f.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/1bcc87559860b066a649e888664e411f.png",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"The OAuth SP editing screen will appear. Enter the following and click ","[Add]","."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Item"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Setting"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"OAuth SP Name"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Any name you like")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Target Domain"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Admin Panel")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Type"),(0,r.kt)("td",{parentName:"tr",align:"left"},"GitHub")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Automatic User Registration"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Do not check")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Store ID in member extension item without using Email"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Do not check")))),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/506f4f174325943cee7679e7bb5490c0.jpg?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/506f4f174325943cee7679e7bb5490c0.jpg",alt:"Image from Gyazo"})),(0,r.kt)("p",null,"From the editing screen of the added OAuth SP, make a note of the login URL."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/620ac2c71221e90cb39d92670b57bef8.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/620ac2c71221e90cb39d92670b57bef8.png",alt:"Image from Gyazo"})),(0,r.kt)("h2",{id:"github-configuration"},"GitHub Configuration"),(0,r.kt)("h3",{id:"add-oauth-apps"},"Add OAuth Apps"),(0,r.kt)("p",null,"Next, configure GitHub settings. Access the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/settings/developers"},"GitHub OAuth Apps Settings page")," and click ","[New OAuth App]","."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/83174e1d012edf3c66c9f26591227511.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/83174e1d012edf3c66c9f26591227511.png",alt:"fetched from Gyazo"})),(0,r.kt)("p",null,"Enter the following information and click ","[Register application]","."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Item"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Setting"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Application name"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Any name you like")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Homepage URL"),(0,r.kt)("td",{parentName:"tr",align:"left"},"URL of your site")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Authorization callback URL"),(0,r.kt)("td",{parentName:"tr",align:"left"},"The login URL noted in ",(0,r.kt)("a",{parentName:"td",href:"#add-oauth-service-provider-configuration"},"Add OAuth Service Provider Configuration"))))),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/30d1d4adf17e669d67fa16d0826876ab.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/30d1d4adf17e669d67fa16d0826876ab.png",alt:"fetched from Gyazo"})),(0,r.kt)("h3",{id:"generate-a-secret-key"},"Generate a Secret Key"),(0,r.kt)("p",null,"Click ","[Generate a new client secret]"," on the page of the added OAuth Apps."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/a828b511ec0345f67ab4d4ea32f02a7d.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/a828b511ec0345f67ab4d4ea32f02a7d.png",alt:"fetched from Gyazo"})),(0,r.kt)("p",null,"Make a note of the Client ID and the generated Client secret. Once you navigate away from the page, the Client secret cannot be displayed again."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/179d95544175f6877b8bca47f016009b.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/179d95544175f6877b8bca47f016009b.png",alt:"fetched from Gyazo"})),(0,r.kt)("h2",{id:"update-kuroco-oauth-sp-configuration"},"Update Kuroco OAuth SP Configuration"),(0,r.kt)("p",null,"Once the GitHub configuration is complete, go back to the Kuroco settings. Click ","[External System Integration]"," -> ","[OAuth SP]","."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/f86a92cddf8148623bba3cbda6cf8a5a.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/f86a92cddf8148623bba3cbda6cf8a5a.png",alt:"fetched from Gyazo"})),(0,r.kt)("p",null,"Click on the name of the OAuth SP that you added in ",(0,r.kt)("a",{parentName:"p",href:"#add-oauth-service-provider-configuration"},"Add OAuth Service Provider Configuration"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/866ad8a2a4001812c7d321f1f67ceb13.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/866ad8a2a4001812c7d321f1f67ceb13.png",alt:"fetched from Gyazo"})),(0,r.kt)("p",null,"To complete the configuration of SSO OAuth SP, enter the client secret and client ID obtained from ",(0,r.kt)("a",{parentName:"p",href:"#generate-a-secret-key"},"Generate a Secret Key"),', check the box for "Enabled", and click "Update".'),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/faf0b7ff6370438a3755dff90b55f104.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/faf0b7ff6370438a3755dff90b55f104.png",alt:"fetched from Gyazo"})),(0,r.kt)("p",null,"That's it! The configuration of SSO OAuth SP is now complete."),(0,r.kt)("h2",{id:"how-to-use"},"How to Use"),(0,r.kt)("p",null,'After setting the target domain in the management screen, the login page will automatically add the option to "Log in with External Account" after adding the SP configuration.',(0,r.kt)("br",{parentName:"p"}),"\n","Clicking the link will redirect to the GitHub login page."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/474a987673e46dd58e92a3cbfab9e722.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/474a987673e46dd58e92a3cbfab9e722.png",alt:"fetched from Gyazo"})),(0,r.kt)("p",null,"Additionally, it is also possible to create a custom login page using the login URL of the SSO OAuth SP editing screen."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://t.gyazo.com/teams/diverta/17683539e915565f0786a65f16c84355.png?width=600","data-zoom-src":"https://t.gyazo.com/teams/diverta/17683539e915565f0786a65f16c84355.png",alt:"fetched from Gyazo"})),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("h3",{id:"where-to-obtain-client-id-and-secret-key"},"Where to Obtain Client ID and Secret Key"),(0,r.kt)("p",null,"The following table shows where to obtain the client ID and secret key for major identity providers that can be selected in the type setting.",(0,r.kt)("br",{parentName:"p"}),"\n","Please refer to it if you are implementing SSO with an IdP other than GitHub."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"IdP"),(0,r.kt)("th",{parentName:"tr",align:"left"},"URL"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Client ID, Secret Key Name"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"GitHub"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/settings/developers"},"https://github.com/settings/developers")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Client ID, Client secrets")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Google"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://console.cloud.google.com/apis/credentials"},"https://console.cloud.google.com/apis/credentials")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Client ID, Client Secret")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Facebook"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://developers.facebook.com/apps"},"https://developers.facebook.com/apps")),(0,r.kt)("td",{parentName:"tr",align:"left"},"App ID, App Secret")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"LINE"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://developers.line.biz/console/"},"https://developers.line.biz/console/")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Channel ID, Channel Secret")))),(0,r.kt)("h3",{id:"about-custom"},"About Custom"),(0,r.kt)("p",null,"For services that are not available in the type selection, you can implement SSO using the custom type and OAuth authentication.",(0,r.kt)("br",{parentName:"p"}),"\n","First, make sure that the identity provider you are trying to connect to supports the OAuth 2.0 specification.",(0,r.kt)("br",{parentName:"p"}),"\n","If it is supported, check the documentation of the identity provider and configure it with ",(0,r.kt)("a",{parentName:"p",href:"/docs/management/sso-oauth-sp/"},"SSO OAuth SP"),"."),(0,r.kt)("p",null,"In addition, clicking ","[Test]"," on the SSO OAuth SP editing screen allows you to test if the configuration is correct. This allows you to check the response returned from the identity provider and configure the parameters accordingly."),(0,r.kt)("a",{href:"https://diverta.gyazo.com/a019563fc44a4dd50550d4b0c9595c48",className:"no-zoom",target:"_blank",rel:"noopener noreferrer"},(0,r.kt)("img",{src:"https://t.gyazo.com/teams/diverta/a019563fc44a4dd50550d4b0c9595c48.png",alt:"Image from Gyazo"})),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Unsaved data cannot be tested. Before running the test, you need to update the configuration data first.")))}u.isMDXComponent=!0}}]);