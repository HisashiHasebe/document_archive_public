<!DOCTYPE html><html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-tutorials/implement-reminder-and-automatic-deletion-of-members"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Implementing Reminder and Automatic Withdrawal Features for Members with No Login for a Certain Period | 導入実績5000社以上の国産エンタープライズ・ヘッドレスCMS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://hisashihasebe.github.io/document_archive_public/202401/docs/tutorials/implement-reminder-and-automatic-deletion-of-members/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:image" content="https://hisashihasebe.github.io/document_archive_public/202401/kuroco-card.png"><meta data-rh="true" name="twitter:card" content="summary"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Implementing Reminder and Automatic Withdrawal Features for Members with No Login for a Certain Period | 導入実績5000社以上の国産エンタープライズ・ヘッドレスCMS"><meta data-rh="true" name="description" content="Implement reminder and automatic withdrawal features for members with no login for a certain period using batch processing. The feature to extend the expiration date when a member logs in will be implemented using custom processing triggered by &quot;after login processing&quot;."><meta data-rh="true" property="og:description" content="Implement reminder and automatic withdrawal features for members with no login for a certain period using batch processing. The feature to extend the expiration date when a member logs in will be implemented using custom processing triggered by &quot;after login processing&quot;."><link data-rh="true" rel="icon" href="/img/icon_kurocoDocument.svg"><link data-rh="true" rel="canonical" href="https://hisashihasebe.github.io/document_archive_public/202401/docs/tutorials/implement-reminder-and-automatic-deletion-of-members/"><link data-rh="true" rel="alternate" href="https://hisashihasebe.github.io/document_archive_public/202401/docs/tutorials/implement-reminder-and-automatic-deletion-of-members/" hreflang="en"><link data-rh="true" rel="alternate" href="https://hisashihasebe.github.io/document_archive_public/202401/ja/docs/tutorials/implement-reminder-and-automatic-deletion-of-members/" hreflang="ja"><link data-rh="true" rel="alternate" href="https://hisashihasebe.github.io/document_archive_public/202401/docs/tutorials/implement-reminder-and-automatic-deletion-of-members/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="導入実績5000社以上の国産エンタープライズ・ヘッドレスCMS RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="導入実績5000社以上の国産エンタープライズ・ヘッドレスCMS Atom Feed">

<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-PBPV4WW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/document_archive_public/202401/assets/css/styles.b0cacabf.css">
<link rel="preload" href="/document_archive_public/202401/assets/js/runtime~main.da1a0a86.js" as="script">
<link rel="preload" href="/document_archive_public/202401/assets/js/main.8624ea78.js" as="script">
<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebPage",
      "isPartOf": {
        "@id": "https://hisashihasebe.github.io/document_archive_public/202401/#website"
      },
      "@id": "https://hisashihasebe.github.io/document_archive_public/202401/docs/tutorials/implement-reminder-and-automatic-deletion-of-members//#webpage",
      "url": "https://hisashihasebe.github.io/document_archive_public/202401/docs/tutorials/implement-reminder-and-automatic-deletion-of-members/",
      "name": "Implementing Reminder and Automatic Withdrawal Features for Members with No Login for a Certain Period",
      "description": "Implement reminder and automatic withdrawal features for members with no login for a certain period using batch processing. The feature to extend the expiration date when a member logs in will be implemented using custom processing triggered by \"after login processing\".",
      "inLanguage": "en",
      "datePublished": "2024-01-18T06:16:57.239Z",
      "dateModified": "2024-01-18T06:16:57.239Z",
      "breadcrumb": {
        "@id": "https://hisashihasebe.github.io/document_archive_public/202401/docs/tutorials/implement-reminder-and-automatic-deletion-of-members//#breadcrumb"
      },
      "potentialAction": [
        {
          "@type": "ReadAction",
          "target": [
            "https://hisashihasebe.github.io/document_archive_public/202401/docs/tutorials/implement-reminder-and-automatic-deletion-of-members/"
          ]
        }
      ]
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://hisashihasebe.github.io/document_archive_public/202401/docs/tutorials/implement-reminder-and-automatic-deletion-of-members//#breadcrumb",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "item": "https://hisashihasebe.github.io/document_archive_public/202401/",
          "name": "Home"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "item": "https://hisashihasebe.github.io/document_archive_public/202401/docs",
          "name": "Documentation"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "tutorials - implement-reminder-and-automatic-deletion-of-members - Implementing Reminder and Automatic Withdrawal Features for Members with No Login for a Certain Period"
        }
      ]
    },
    {
      "@type": "WebSite",
      "@id": "https://hisashihasebe.github.io/document_archive_public/202401/#website",
      "name": "導入実績5000社以上の国産エンタープライズ・ヘッドレスCMS",
      "url": "https://hisashihasebe.github.io/document_archive_public/202401/",
      "description": "Kuroco is enterprise Headless CMS for API-first development.",
      "publisher": {
        "@id": "https://hisashihasebe.github.io/document_archive_public/202401/#organization"
      }
    },
    {
      "@type": "Organization",
      "@id": "https://hisashihasebe.github.io/document_archive_public/202401/#organization",
      "name": "導入実績5000社以上の国産エンタープライズ・ヘッドレスCMS",
      "url": "https://hisashihasebe.github.io/document_archive_public/202401/",
      "sameAs": [
        "https://www.diverta.co.jp/"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "url": "https://www.diverta.co.jp/en/contact/"
      },
      "logo": {
        "@type": "ImageObject",
        "@id": "https://www.diverta.co.jp/#logo",
        "url": "https://hisashihasebe.github.io/document_archive_public/202401/files/user/img/common/logo_Kuroco_black.svg",
        "contentUrl": "https://hisashihasebe.github.io/document_archive_public/202401/files/user/img/common/logo_Kuroco_black.svg",
        "width": 155,
        "height": 56,
        "caption": "Diverta Inc."
      },
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "JP",
        "postalCode": "162-0823",
        "streetAddress": "Central Plaza 6F 1-1 Kaguragashi Shinjuku-ku, Tokyo, Japan"
      }
    }
  ]
}</script></head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PBPV4WW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div class="z-[600] fixed h-screen w-full flex items-center justify-center invisible"><div><svg class="animate-spin h-40 w-40 text-gray-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-50" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="fill-primary" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div></div><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://hisashihasebe.github.io/document_archive_public/202401/" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo.svg" alt="Kuroco home" class="themedImage_ToTc themedImage--light_HNdA" height="37.5px"><img src="/img/logo_dark.svg" alt="Kuroco home" class="themedImage_ToTc themedImage--dark_i4oU" height="37.5px"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Home</a><a class="navbar__item navbar__link" href="/quick-guide/">Quick guide</a><a class="navbar__item navbar__link" href="/docs/about/about-kuroco/">About Kuroco</a><a class="navbar__item navbar__link" href="/docs/management/dashboard/">Admin Manual</a><a class="navbar__item navbar__link" href="/docs/about/support/">Support</a><a class="navbar__item navbar__link" href="/docs/faq/">FAQ</a><a class="navbar__item navbar__link" href="/docs/update/kuroco-roadmap/">Releases</a><a class="navbar__item navbar__link" href="/docs/about/sales/">Materials</a></div><div class="navbar__items navbar__items--right"><button type="button" class="button button--outline button--secondary py-3 px-3 border-0"><svg aria-hidden="true" class="w-5 h-5 align-middle" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><span class="sr-only">Search</span></button><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/tutorials/implement-reminder-and-automatic-deletion-of-members/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/ja/docs/tutorials/implement-reminder-and-automatic-deletion-of-members/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><div class="light"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/tutorials/beginners-guide/">Tutorial</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/beginners-guide/">Get started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/kuroco-sample-site/">kuroco-sample</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/adding-a-topics/">Content management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/difference-between-kurocofiles-and-kurocofront/">File management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/configure-endpoint/">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/connect-to-github-with-kuroco-front/">Kuroco Front</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/how-to-only-display-comments-that-are-addressed-to-a-specific-user/">Activity</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/sending-notification-messages-to-users-who-submitted-form-responses/">Campaign</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/how-to-add-new-member/">Member management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/tutorials/how-to-use-batch/">Operation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/tutorials/how-to-use-batch/">Batch</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/how-to-use-batch/">How to use batch process in Kuroco</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/how-to-use-generate-pdf/">Scheduled generation of screenshot PDFs of external sites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/how-to-make-thumb-from-pdf/">Generate thumbnail image from the first page of a PDF using Batch Processs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/how-to-implement-batch-function-exports-csv/">Creating daily backup data in CSV using Batch Process</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/implement-reminder-and-automatic-deletion-of-members/">Implementing Reminder and Automatic Withdrawal Features for Members with No Login for a Certain Period</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/delete-filemanager-files-by-using-smarty-plugins/">Automatically Delete Files in File Manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/add-reminder-function-to-form/">Adding Reminder Functionality to a Form</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/setting-up-stubs-on-api-endpoints-using-custom-functions/">Custom function</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/apply-css-to-a-kuroco-management-screen-with-the-plugin/">Environment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/using-gsuite-to-implement-saml-based-sso/">External system integration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/integrate-kuroco-with-nuxt/">Front-end</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/integrate-login/">My-page</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed theme-doc-sidebar-item-category-ec-tutorial"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/ec-management/">EC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/create-a-har-file/">Technical Support</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/starting-a-project-on-kuroco/">Project management</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/reference/endpoint-settings/">Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/management/dashboard/">Admin panel user guide</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tutorial</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Operation</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Batch</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Implementing Reminder and Automatic Withdrawal Features for Members with No Login for a Certain Period</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Implementing Reminder and Automatic Withdrawal Features for Members with No Login for a Certain Period</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2><p>Using batch processing, we will implement reminder and automatic withdrawal features for members who have not logged in for a certain period.<br>
<!-- -->Also, the feature to extend the expiration date when a member logs in will be implemented using custom processing triggered by "after login processing".</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-youll-learn">What you'll learn<a href="#what-youll-learn" class="hash-link" aria-label="Direct link to What you'll learn" title="Direct link to What you'll learn">​</a></h3><p>We will implement reminder and automatic withdrawal features for members who have not logged in for a certain period using the following steps.</p><ul><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#implementation-of-reminder-feature">Implementation of Reminder Feature</a></li><li><a href="#implementation-of-automatic-withdrawal-feature">Implementation of Automatic Withdrawal Feature</a></li><li><a href="#implementation-of-the-feature-to-extend-the-expiration-date-when-a-member-logs-in">Implementation of the feature to extend the expiration date when a member logs in</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h3><p>Members and groups to be used for testing will be added as necessary.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites-1">Prerequisites<a href="#prerequisites-1" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-the-expiration-date-for-member-login-permission">Set the expiration date for member login permission<a href="#set-the-expiration-date-for-member-login-permission" class="hash-link" aria-label="Direct link to Set the expiration date for member login permission" title="Direct link to Set the expiration date for member login permission">​</a></h3><p>The expiration date for member login permission will be automatically added by the custom processing that we will set up later, but for the purpose of testing, let's set it manually first.<br>
<!-- -->Click <!-- -->[Member]<!-- --> -&gt; <!-- -->[Member]<!-- -->.</p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/f7d9bb1ae015c27df925f9c82c42b6fe.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/f7d9bb1ae015c27df925f9c82c42b6fe.png" alt="Image from Gyazo" class="img_ev3q"></p><p>On the member list page, click the gear icon in the top right corner of the table to open the "Display Settings" and add the "Login permission deadline" field.</p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/c85ce4f2669513cb69e9651f3f3537a5.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/c85ce4f2669513cb69e9651f3f3537a5.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Click on the name of the member whose settings you want to change on the member list.</p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/1c016e36d91ba656b7f951d3f66deff1.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/1c016e36d91ba656b7f951d3f66deff1.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Set the login permission expiry date.</p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/05b293b84a1a70ca9bf8ce99cc465b3e.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/05b293b84a1a70ca9bf8ce99cc465b3e.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Confirm that the "Don't subscribe to notifications" is unchecked.
<img loading="lazy" src="https://t.gyazo.com/teams/diverta/f8265de19ae3cf5b3ed839368163d783.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/f8265de19ae3cf5b3ed839368163d783.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Similarly, set the login permission expiration date for the member used for testing as follows.</p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/ef6aa86abfa6b5da1b2da92c62c5465f.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/ef6aa86abfa6b5da1b2da92c62c5465f.png" alt="Image from Gyazo" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-an-api-for-internal-processing">Creating an API for internal processing<a href="#creating-an-api-for-internal-processing" class="hash-link" aria-label="Direct link to Creating an API for internal processing" title="Direct link to Creating an API for internal processing">​</a></h3><p>It is recommended to separate APIs that are only used internally within Kuroco. Therefore, first create a new API for internal use. If it has already been added, you can skip to the next step.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-an-api">Creating an API<a href="#creating-an-api" class="hash-link" aria-label="Direct link to Creating an API" title="Direct link to Creating an API">​</a></h4><p>Click <!-- -->[Add]<!-- --> from the API section in the Kuroco admin panel.</p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/9ecf385ebd0bbd4ed2fce44c5b03908a.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/9ecf385ebd0bbd4ed2fce44c5b03908a.png" alt="Image from Gyazo" class="img_ev3q"></p><p>On the API editor, enter the following information and click "Add".
<img loading="lazy" src="https://t.gyazo.com/teams/diverta/4ad1441b5747037b667256ac969fa60a.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/4ad1441b5747037b667256ac969fa60a.png" alt="Image from Gyazo" class="img_ev3q"></p><table><thead><tr><th>Field</th><th>Settings</th></tr></thead><tbody><tr><td>Title</td><td>Internal</td></tr><tr><td>Version</td><td>1.0</td></tr><tr><td>Description</td><td>API for internal use</td></tr></tbody></table><p>The API has been created.</p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/42d21c717bec7d592b968486a036da90.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/42d21c717bec7d592b968486a036da90.png" alt="Image from Gyazo" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="security-settings">Security settings<a href="#security-settings" class="hash-link" aria-label="Direct link to Security settings" title="Direct link to Security settings">​</a></h4><p>Next, configure the security settings. Click on <!-- -->[Security]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/02b9bb7afc1ef03a4f26f524267c76a8.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/02b9bb7afc1ef03a4f26f524267c76a8.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Set the security to <!-- -->[Dynamic Access Token]<!-- -->, then click <!-- -->[Save]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/0a121f90acd9ef3c1494cd895d922dae.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/0a121f90acd9ef3c1494cd895d922dae.png" alt="Image from Gyazo" class="img_ev3q"></p><p>After setting the security to <!-- -->[Dynamic Access Token]<!-- -->, it is recommended to use the <code>Login::token</code> endpoint. However, if it is only used internally, you can ignore it.</p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/8ab8a67d5768bf7d84e6e8dc79753de1.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/8ab8a67d5768bf7d84e6e8dc79753de1.png" alt="Image from Gyazo" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cors-settings">CORS settings<a href="#cors-settings" class="hash-link" aria-label="Direct link to CORS settings" title="Direct link to CORS settings">​</a></h4><p>Next, configure the CORS settings. Click on <!-- -->[Operation CORS]<!-- -->.</p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/706501419568a0dc13e7312f83da4fd4.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/706501419568a0dc13e7312f83da4fd4.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Click <!-- -->[Add Origin]<!-- --> in CORS_ALLOW_ORIGINS, and add the following:</p><ul><li>Admin panel URL</li></ul><p>Click <!-- -->[Add Method]<!-- --> in CORS_ALLOW_METHODS, and add the following:</p><ul><li>GET  </li><li>POST</li><li>OPTIONS</li></ul><p>Make sure that <!-- -->[Allow Credentials]<!-- --> is checked in CORS_ALLOW_CREDENTIALS.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/edf857331a01a33515297413a4ac2314.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/edf857331a01a33515297413a4ac2314.png" alt="Image from Gyazo" class="img_ev3q"></p><p>If there are no issues, click <!-- -->[Save]<!-- -->. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-of-reminder-feature">Implementation of Reminder Feature<a href="#implementation-of-reminder-feature" class="hash-link" aria-label="Direct link to Implementation of Reminder Feature" title="Direct link to Implementation of Reminder Feature">​</a></h2><p>The reminder function works in the following way:</p><ul><li>Send a request to the endpoint by batch processing every day at 06:00.</li><li>The endpoint sends information on the message template identifier and custom member filter ID to the configured delivery ID.</li><li>The delivery sends the contents of the message template to the custom member filter.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-custom-member-filter">Creating a Custom Member Filter<a href="#creating-a-custom-member-filter" class="hash-link" aria-label="Direct link to Creating a Custom Member Filter" title="Direct link to Creating a Custom Member Filter">​</a></h3><p>We set the recipients for the reminder email with a custom member filter.<br>
<!-- -->Click <!-- -->[Member]<!-- --> -&gt; <!-- -->[Custom Member Filter]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/b0087d194aab23c0b9a7be46e67580a2.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/b0087d194aab23c0b9a7be46e67580a2.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Click <!-- -->[Add]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/4c5a9046ce53aac37b281e07ba527f86.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/4c5a9046ce53aac37b281e07ba527f86.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Create the following filter:<br>
<!-- -->The recipients of the reminder email are those whose expiration date is 30 days prior and less than 7 days.</p><table><thead><tr><th align="left">Item</th><th align="left">Title</th></tr></thead><tbody><tr><td align="left">Title</td><td align="left">Login permission expiry date reminding target members</td></tr><tr><td align="left">Filter</td><td align="left">As below</td></tr></tbody></table><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/af99650dc93055e6115b71fc7f9e8123.jpg?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/af99650dc93055e6115b71fc7f9e8123.jpg" alt="Image from Gyazo" class="img_ev3q"></p><p>Click <!-- -->[View result]<!-- --> to see if the members you expect will hit.
If you have multiple conditions, check the test member's login permit manually and check it. </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/5a56aaefc823a2b4f35e80b90dfe933b.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/5a56aaefc823a2b4f35e80b90dfe933b.png" alt="Image from Gyazo" class="img_ev3q"></p><p>If there is no problem, click <!-- -->[Add]<!-- --> to add a custom member filter.<br>
<!-- -->The ID of the created custom menber filter will be used later, so make a note of it.</p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/89e55969dc027aaa3c41dff40df10cb2.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/89e55969dc027aaa3c41dff40df10cb2.png" alt="Image from Gyazo" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-notification">Create notification<a href="#create-notification" class="hash-link" aria-label="Direct link to Create notification" title="Direct link to Create notification">​</a></h3><p>We use the notification function for sending reminder email.<br>
<!-- -->Click <!-- -->[Campaign]<!-- --> -&gt; <!-- -->[Notification]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/3d373c4c1c1d3f71f21c60f8fc7cfaf1.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/3d373c4c1c1d3f71f21c60f8fc7cfaf1.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Click <!-- -->[Add]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/5d8d37e7f82dff4fe1967a3c7e1c3724.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/5d8d37e7f82dff4fe1967a3c7e1c3724.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Enter as follows:  </p><table><thead><tr><th align="left">Item</th><th align="left">Settings</th></tr></thead><tbody><tr><td align="left">Title</td><td align="left">Reminder of login permission expiry</td></tr><tr><td align="left">Sender</td><td align="left"><code>noreply@kuroco-mail.app</code></td></tr><tr><td align="left">Other settings</td><td align="left">as default</td></tr></tbody></table><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/284530af0d12e4ebac686794ba459201.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/284530af0d12e4ebac686794ba459201.png" alt="Image from Gyazo" class="img_ev3q"></p><ul><li>Recipients will be set in the batch process later so you can leave it empty for now. </li><li>If you want to change the sender's email address, link your Kuroco site with Sendgrid referring to <a href="/docs/tutorials/how-to-link-sendgrid/">How to link Sendgrid</a>.</li></ul><p>After setting, click <!-- -->[Add]<!-- --> to add the notification and make a note for the notification ID.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/87af67077d54b0e0043f632242fec362.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/87af67077d54b0e0043f632242fec362.png" alt="Image from Gyazo" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-message-template">Create message template<a href="#create-message-template" class="hash-link" aria-label="Direct link to Create message template" title="Direct link to Create message template">​</a></h3><p>We use message template to create the text of reminder message.<br>
<!-- -->Click <!-- -->[Operation]<!-- --> &gt; <!-- -->[Message template]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/df2a6ba9aacf5414b6d8d6dce419c497.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/df2a6ba9aacf5414b6d8d6dce419c497.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Click <!-- -->[Add]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/1485d432be1acc1abdf4ee99b1f53307.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/1485d432be1acc1abdf4ee99b1f53307.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Enter as follows:  </p><table><thead><tr><th align="left">Item</th><th align="left">Settings</th></tr></thead><tbody><tr><td align="left">Template</td><td align="left">login permission expiry remind template</td></tr><tr><td align="left">Identifier</td><td align="left">expiration_remind_template</td></tr><tr><td align="left">Body</td><td align="left">As below</td></tr></tbody></table><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Dear %name1% %name2% </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your login permission will expire on %login_ok_ymd%.</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Please login before the expiry date.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/8409ccbf5873c96c1f089ceb6dd959a1.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/8409ccbf5873c96c1f089ceb6dd959a1.png" alt="Image from Gyazo" class="img_ev3q"></p><p>After setting, click <!-- -->[Add]<!-- --> to save the message template.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-custom-function">Create custom function<a href="#create-custom-function" class="hash-link" aria-label="Direct link to Create custom function" title="Direct link to Create custom function">​</a></h3><p>If you enter <code>%name1%</code> and <code>%name2%</code> in the notification message, you can display the name of the member of the destination, but if you want to add items that are not available by default such as <code>%login_ok_ymd%</code> or complicated processing, you need to use custom function.</p><p>Click <!-- -->[Operation]<!-- --> -&gt; <!-- -->[Custom function]<!-- -->.</p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/25dc5649ab2fc103cdcf869df1733a62.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/25dc5649ab2fc103cdcf869df1733a62.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Click <!-- -->[Add]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/52169f762d9ea4abf1d05bb56d553906.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/52169f762d9ea4abf1d05bb56d553906.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Enter as follows:</p><table><thead><tr><th align="left">Item</th><th align="left">Settings</th></tr></thead><tbody><tr><td align="left">Title</td><td align="left">Notification substitution</td></tr><tr><td align="left">Identifier</td><td align="left">notification_substitution</td></tr><tr><td align="left">Used by component(s)</td><td align="left">Trigger：Notification substitution<br>value: ID of the notification(2)</td></tr><tr><td align="left">Process</td><td align="left">Enter the code below</td></tr></tbody></table><div class="language-smarty codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smarty codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">assign_array</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">substitutions</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">values</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">''</span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">assign</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">substitutions</span><span class="token smarty language-smarty punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty variable" style="color:#36acaa">name1</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">value</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">$member_info</span><span class="token smarty language-smarty punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty variable" style="color:#36acaa">name1</span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">assign</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">substitutions</span><span class="token smarty language-smarty punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty variable" style="color:#36acaa">name2</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">value</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">$member_info</span><span class="token smarty language-smarty punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty variable" style="color:#36acaa">name2</span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">assign</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">substitutions</span><span class="token smarty language-smarty punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty variable" style="color:#36acaa">login_ok_ymd</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">value</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">$member_info</span><span class="token smarty language-smarty punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty variable" style="color:#36acaa">login_ok_ymd</span><span class="token smarty language-smarty operator" style="color:#393A34">|</span><span class="token smarty language-smarty function" style="color:#d73a49">date_format</span><span class="token smarty language-smarty punctuation" style="color:#393A34">:</span><span class="token smarty language-smarty string" style="color:#e3116c">'Y-m-d'</span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/237b6e347bd234813f1a2d6eeb6f7f4c.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/237b6e347bd234813f1a2d6eeb6f7f4c.png" alt="Image from Gyazo" class="img_ev3q"></p><p>After setting, click <!-- -->[Add]<!-- --> to save the custom function. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-endpoint">Create endpoint<a href="#create-endpoint" class="hash-link" aria-label="Direct link to Create endpoint" title="Direct link to Create endpoint">​</a></h3><p>Next, we create the endpoint.<br>
<!-- -->Click <!-- -->[Add new endpoint]<!-- --> from the Internal API page.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/1b1ecdd7d0d8b070db1c810258a8fdca.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/1b1ecdd7d0d8b070db1c810258a8fdca.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Create the following endpoint:</p><table><thead><tr><th align="left">Item</th><th align="left">settings</th></tr></thead><tbody><tr><td align="left">Path</td><td align="left">expiration_remind</td></tr><tr><td align="left">Category</td><td align="left">notification</td></tr><tr><td align="left">Model</td><td align="left">Magazine</td></tr><tr><td align="left">Operation</td><td align="left">send</td></tr><tr><td align="left">destination_id</td><td align="left">Custom member filter ID(1)</td></tr><tr><td align="left">mail_type</td><td align="left">1</td></tr><tr><td align="left">mail_template_name</td><td align="left">Identifier of the message template(expiration_remind_template)</td></tr><tr><td align="left">subject</td><td align="left">Your login permission is expiring soon</td></tr></tbody></table><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/851397d6c5a607eba9d13537f1aefe9b.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/851397d6c5a607eba9d13537f1aefe9b.png" alt="Image from Gyazo" class="img_ev3q">
<img loading="lazy" src="https://t.gyazo.com/teams/diverta/3775d8d97f8aad9ed9dee509a7100b8d.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/3775d8d97f8aad9ed9dee509a7100b8d.png" alt="Image from Gyazo" class="img_ev3q"></p><p>After setting, click<!-- -->[Add]<!-- --> to add the endpoint.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-batch-process">Create batch process<a href="#create-batch-process" class="hash-link" aria-label="Direct link to Create batch process" title="Direct link to Create batch process">​</a></h3><p>We create a reminding function using batch process and send the reminder message to target members daily.<br>
<!-- -->Click <!-- -->[Operation]<!-- --> -&gt; <!-- -->[Batch process]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/1ecfae69bcffdbcdacbab103904db3ad.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/1ecfae69bcffdbcdacbab103904db3ad.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Click <!-- -->[Add]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/8eb644facfb5c12cf04a8484ebbdccb5.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/8eb644facfb5c12cf04a8484ebbdccb5.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Set as follows:  </p><table><thead><tr><th align="left">Item</th><th align="left">settings</th></tr></thead><tbody><tr><td align="left">Title</td><td align="left">Send reminder of login permission expiry</td></tr><tr><td align="left">Identifier</td><td align="left">send_remind_mail</td></tr><tr><td align="left">Batch</td><td align="left">Every day 06:00</td></tr><tr><td align="left">Process</td><td align="left">Below code</td></tr></tbody></table><div class="language-smarty codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smarty codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">api_internal</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'response'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">status_var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'status'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">endpoint</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'/rcms-api/4/expiration_remind/2'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">method</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'POST'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">member_id</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'1'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty"></span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Replace <code>/rcms-api/4/expiration_remind/2</code> with your own endpoint.</p></div></div><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/711ccbac44f2e0742f24184e1ec9dbe8.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/711ccbac44f2e0742f24184e1ec9dbe8.png" alt="Image from Gyazo" class="img_ev3q"></p><p>After setting, click <!-- -->[Add]<!-- --> to save the batch process.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="operation-check">Operation check<a href="#operation-check" class="hash-link" aria-label="Direct link to Operation check" title="Direct link to Operation check">​</a></h3><p>At last, click <!-- -->[Run now]<!-- --> to check the operation.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/a14bce742588cd54b516322a008bd6e0.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/a14bce742588cd54b516322a008bd6e0.png" alt="Image from Gyazo" class="img_ev3q"></p><p>If the settings are correct, below e-mail will be sent. </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/e93cd0d2656eb1d7f7dc98ee92421c0e.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/e93cd0d2656eb1d7f7dc98ee92421c0e.png" alt="Image from Gyazo" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-of-automatic-withdrawal-feature">Implementation of Automatic Withdrawal Feature<a href="#implementation-of-automatic-withdrawal-feature" class="hash-link" aria-label="Direct link to Implementation of Automatic Withdrawal Feature" title="Direct link to Implementation of Automatic Withdrawal Feature">​</a></h2><p>We create the automatic member delete function using batch process which checks for the existence of target members on a daily basis, and if the target members exist, deletes them using the <code>Member::delete</code> endpoint.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-custom-member-filter-1">Creating a Custom Member Filter<a href="#creating-a-custom-member-filter-1" class="hash-link" aria-label="Direct link to Creating a Custom Member Filter" title="Direct link to Creating a Custom Member Filter">​</a></h3><p>We use the custom member filter to identify the target members.<br>
<!-- -->Click <!-- -->[Member]<!-- --> -&gt; <!-- -->[Custom Member Filter]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/b0087d194aab23c0b9a7be46e67580a2.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/b0087d194aab23c0b9a7be46e67580a2.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Click <!-- -->[Add]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/4c5a9046ce53aac37b281e07ba527f86.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/4c5a9046ce53aac37b281e07ba527f86.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Create the following filter:  </p><table><thead><tr><th align="left">Item</th><th align="left">Settings</th></tr></thead><tbody><tr><td align="left">Title</td><td align="left">target members of automatic deletion</td></tr><tr><td align="left">Filter</td><td align="left">As below</td></tr></tbody></table><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/b7dc6b6fa53e7d3d9908fac14ca5ad3f.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/b7dc6b6fa53e7d3d9908fac14ca5ad3f.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Click <!-- -->[View result]<!-- --> to check the result and if there are no issues, click <!-- -->[Add]<!-- --> to save the custom member filter.</p><p>The ID of the created custom member filter  will be used later so make a note of it.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/3825e3bd648e737f66bb76ea337329bf.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/3825e3bd648e737f66bb76ea337329bf.png" alt="Image from Gyazo" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-endpoints">Create endpoints<a href="#create-endpoints" class="hash-link" aria-label="Direct link to Create endpoints" title="Direct link to Create endpoints">​</a></h3><p>Create two endpoints, one to return the list of members to be deleted, and one to delete members.<br>
<!-- -->Click <!-- -->[Add new endpoint]<!-- --> from the Internal API page.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/1b1ecdd7d0d8b070db1c810258a8fdca.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/1b1ecdd7d0d8b070db1c810258a8fdca.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Create 2 endpoints as follows:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="delete_member_list-endpoint"><code>delete_member_list</code> endpoint<a href="#delete_member_list-endpoint" class="hash-link" aria-label="Direct link to delete_member_list-endpoint" title="Direct link to delete_member_list-endpoint">​</a></h4><table><thead><tr><th align="left">Item</th><th align="left">settings</th></tr></thead><tbody><tr><td align="left">Path</td><td align="left">delete_member_list</td></tr><tr><td align="left">Category</td><td align="left">Member</td></tr><tr><td align="left">Model</td><td align="left">Member</td></tr><tr><td align="left">Operation</td><td align="left">list</td></tr><tr><td align="left">custom_search_id</td><td align="left">Custom member filter ID(3)</td></tr></tbody></table><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/4cff07a3dd47f2e8f79f57e3d905f92e.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/4cff07a3dd47f2e8f79f57e3d905f92e.png" alt="Image from Gyazo" class="img_ev3q"></p><p>After setting, click <!-- -->[Add]<!-- --> to save the endpoint settings. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="expired_member_delete-endpoint"><code>expired_member_delete</code> endpoint<a href="#expired_member_delete-endpoint" class="hash-link" aria-label="Direct link to expired_member_delete-endpoint" title="Direct link to expired_member_delete-endpoint">​</a></h4><p>We create the endpoint to delete the target members.</p><table><thead><tr><th align="left">Item</th><th align="left">settings</th></tr></thead><tbody><tr><td align="left">Path</td><td align="left">expired_member_delete</td></tr><tr><td align="left">Category</td><td align="left">Memmber</td></tr><tr><td align="left">Model</td><td align="left">Member</td></tr><tr><td align="left">Operation</td><td align="left">delete</td></tr><tr><td align="left">allowed_group_ids</td><td align="left">Group ID in which target members belong(104)</td></tr></tbody></table><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/a170e4df1c21e0740c9a84998a92206a.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/a170e4df1c21e0740c9a84998a92206a.png" alt="Image from Gyazo" class="img_ev3q"></p><p>After setting, click <!-- -->[Add]<!-- --> to save the endpoint settings.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-batch-process-1">Create batch process<a href="#create-batch-process-1" class="hash-link" aria-label="Direct link to Create batch process" title="Direct link to Create batch process">​</a></h3><p>Next, we create a batch process.<br>
<!-- -->Click <!-- -->[Operation]<!-- --> -&gt; <!-- -->[Batch process]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/1ecfae69bcffdbcdacbab103904db3ad.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/1ecfae69bcffdbcdacbab103904db3ad.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Click <!-- -->[Add]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/8eb644facfb5c12cf04a8484ebbdccb5.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/8eb644facfb5c12cf04a8484ebbdccb5.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Set as follows:  </p><table><thead><tr><th align="left">Item</th><th align="left">settings</th></tr></thead><tbody><tr><td align="left">Title</td><td align="left">Delete members with expired login permission</td></tr><tr><td align="left">Identifier</td><td align="left">delete_expired_member</td></tr><tr><td align="left">Batch</td><td align="left">Every day 05:00</td></tr><tr><td align="left">Process</td><td align="left">Below code</td></tr></tbody></table><div class="language-smarty codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smarty codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty comment" style="color:#999988;font-style:italic">{*Get target members*}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">api_internal</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'response'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">status_var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'status'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">endpoint</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'/rcms-api/4/delete_member_list'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">method</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'GET'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">member_id</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'1'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty"></span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token smarty language-smarty comment" style="color:#999988;font-style:italic">{*Delete target members*}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">foreach</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">from</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">$response</span><span class="token smarty language-smarty punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty variable" style="color:#36acaa">list</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">item</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">n</span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">assign</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'target'</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">value</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">"/rcms-api/4/expired_member_delete/</span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string interpolation expression variable" style="color:#36acaa">$n</span><span class="token smarty language-smarty string interpolation expression punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty string interpolation expression variable" style="color:#36acaa">member_id</span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string" style="color:#e3116c">"</span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token smarty language-smarty comment" style="color:#999988;font-style:italic">{* member_id=1 -&gt; admin user *}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">api_internal</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">        </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'response'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">        </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">status_var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'status'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">        </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">endpoint</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">$target</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">        </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">method</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'POST'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">        </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">member_id</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'1'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">logger</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">msg1</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">"Delete </span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string interpolation expression variable" style="color:#36acaa">$n</span><span class="token smarty language-smarty string interpolation expression punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty string interpolation expression variable" style="color:#36acaa">name1</span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string interpolation expression variable" style="color:#36acaa">$n</span><span class="token smarty language-smarty string interpolation expression punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty string interpolation expression variable" style="color:#36acaa">name2</span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string" style="color:#e3116c">(member_id=</span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string interpolation expression variable" style="color:#36acaa">$n</span><span class="token smarty language-smarty string interpolation expression punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty string interpolation expression variable" style="color:#36acaa">member_id</span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string" style="color:#e3116c">)"</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">msg2</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">$response</span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{/</span><span class="token smarty language-smarty keyword" style="color:#00009f">foreach</span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Replace <code>/rcms-api/4/delete_member_list</code> and <code>/rcms-api/4/expired_member_delete/</code> with your own endpoints.</p></div></div><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/05e2e44e245c4a0de80a6180fd4bcd7a.jpg?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/05e2e44e245c4a0de80a6180fd4bcd7a.jpg" alt="Image from Gyazo" class="img_ev3q"></p><p>After entering above, click <!-- -->[Add]<!-- --> to save the batch process. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="operation-check-1">Operation check<a href="#operation-check-1" class="hash-link" aria-label="Direct link to Operation check" title="Direct link to Operation check">​</a></h3><p>At last, click <!-- -->[Run now]<!-- --> to check the operation.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/95c956775728902a245a1acdc0f88811.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/95c956775728902a245a1acdc0f88811.png" alt="Image from Gyazo" class="img_ev3q"></p><p>If the setting is correct, the log will remain in the custom log as follows and the members will be deleted.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/48bd94651d66a9303b6bfb453117b1ec.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/48bd94651d66a9303b6bfb453117b1ec.png" alt="Image from Gyazo" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-of-the-feature-to-extend-the-expiration-date-when-a-member-logs-in">Implementation of the feature to extend the expiration date when a member logs in<a href="#implementation-of-the-feature-to-extend-the-expiration-date-when-a-member-logs-in" class="hash-link" aria-label="Direct link to Implementation of the feature to extend the expiration date when a member logs in" title="Direct link to Implementation of the feature to extend the expiration date when a member logs in">​</a></h2><p>Finally, we implement a function that automatically extends the expiration date of the login permission after logging in.
Here, the custom process is performed after the member logging in, and the <code>login_ok_ymd</code> is updated at the <code>Member::Update</code> endpoint.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-endpoint-1">Create endpoint<a href="#create-endpoint-1" class="hash-link" aria-label="Direct link to Create endpoint" title="Direct link to Create endpoint">​</a></h3><p>Click <!-- -->[Add new endpoint]<!-- --> from the Internal API page.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/1b1ecdd7d0d8b070db1c810258a8fdca.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/1b1ecdd7d0d8b070db1c810258a8fdca.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Create the following endpoint:</p><table><thead><tr><th align="left">Item</th><th align="left">settings</th></tr></thead><tbody><tr><td align="left">Path</td><td align="left">member/update_login_ok_ymd</td></tr><tr><td align="left">Category</td><td align="left">Member</td></tr><tr><td align="left">Model</td><td align="left">Member</td></tr><tr><td align="left">Operation</td><td align="left">update</td></tr><tr><td align="left">self_only</td><td align="left">check</td></tr></tbody></table><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/a9d2ac3a45fb7e11c39e56921ff7cfc6.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/a9d2ac3a45fb7e11c39e56921ff7cfc6.png" alt="Image from Gyazo" class="img_ev3q">  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-custom-function-1">Create custom function<a href="#create-custom-function-1" class="hash-link" aria-label="Direct link to Create custom function" title="Direct link to Create custom function">​</a></h3><p>Click <!-- -->[Operation]<!-- --> -&gt; <!-- -->[Custom function]<!-- -->.</p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/25dc5649ab2fc103cdcf869df1733a62.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/25dc5649ab2fc103cdcf869df1733a62.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Click <!-- -->[Add]<!-- -->.  </p><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/52169f762d9ea4abf1d05bb56d553906.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/52169f762d9ea4abf1d05bb56d553906.png" alt="Image from Gyazo" class="img_ev3q"></p><p>Enter as follows:</p><table><thead><tr><th align="left">Item</th><th align="left">Settings</th></tr></thead><tbody><tr><td align="left">Title</td><td align="left">Extend login permission expiry once logging in</td></tr><tr><td align="left">Identifier</td><td align="left">update_login_permission_date</td></tr><tr><td align="left">Used by component(s)</td><td align="left">Trigger: After logging in<br>Value: 0</td></tr><tr><td align="left">Process</td><td align="left">Below code</td></tr></tbody></table><div class="language-smarty codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smarty codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">assign_member_detail</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">assign_group_flg</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty number" style="color:#36acaa">1</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'member_detail'</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">member_id</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">$member_id</span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token smarty language-smarty comment" style="color:#999988;font-style:italic">{* add extending 1y *}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">assign_array</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">"payload"</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">keys</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">"login_ok_ymd"</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">values</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">"1 year"</span><span class="token smarty language-smarty operator" style="color:#393A34">|</span><span class="token smarty language-smarty function" style="color:#d73a49">strtotime</span><span class="token smarty language-smarty operator" style="color:#393A34">|</span><span class="token smarty language-smarty function" style="color:#d73a49">date_format</span><span class="token smarty language-smarty punctuation" style="color:#393A34">:</span><span class="token smarty language-smarty string" style="color:#e3116c">"Y-m-d"</span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">if</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty string" style="color:#e3116c">"1"</span><span class="token smarty language-smarty operator" style="color:#393A34">|</span><span class="token smarty language-smarty function" style="color:#d73a49">rcms_in_array</span><span class="token smarty language-smarty punctuation" style="color:#393A34">:</span><span class="token smarty language-smarty variable" style="color:#36acaa">$member_detail</span><span class="token smarty language-smarty punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty variable" style="color:#36acaa">arrGroup_id</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty operator" style="color:#393A34">||</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty string" style="color:#e3116c">"2"</span><span class="token smarty language-smarty operator" style="color:#393A34">|</span><span class="token smarty language-smarty function" style="color:#d73a49">rcms_in_array</span><span class="token smarty language-smarty punctuation" style="color:#393A34">:</span><span class="token smarty language-smarty variable" style="color:#36acaa">$member_detail</span><span class="token smarty language-smarty punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty variable" style="color:#36acaa">arrGroup_id</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty"></span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token smarty language-smarty comment" style="color:#999988;font-style:italic">{* skip execution when the user supposed to be administrator *}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">else</span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token smarty language-smarty comment" style="color:#999988;font-style:italic">{* member_id=1 -&gt; admin user *}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">api_internal</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">        </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'response'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">        </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">status_var</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'status'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">        </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">endpoint</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'/rcms-api/4/member/update_login_ok_ymd'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">        </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">method</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">'POST'</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">        </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">queries</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">$payload</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">        </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">member_id</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">$member_id</span><span class="token smarty language-smarty"></span><br></span><span class="token-line" style="color:#393A34"><span class="token smarty language-smarty">    </span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{</span><span class="token smarty language-smarty keyword" style="color:#00009f">logger</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">msg1</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty string" style="color:#e3116c">"Update login_ok_ymd of </span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string interpolation expression variable" style="color:#36acaa">$member_detail</span><span class="token smarty language-smarty string interpolation expression punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty string interpolation expression variable" style="color:#36acaa">name1</span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string interpolation expression variable" style="color:#36acaa">$member_detail</span><span class="token smarty language-smarty string interpolation expression punctuation" style="color:#393A34">.</span><span class="token smarty language-smarty string interpolation expression variable" style="color:#36acaa">name2</span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string" style="color:#e3116c">(member_id=</span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string interpolation expression variable" style="color:#36acaa">$member_id</span><span class="token smarty language-smarty string interpolation interpolation-punctuation punctuation" style="color:#393A34">`</span><span class="token smarty language-smarty string" style="color:#e3116c">)"</span><span class="token smarty language-smarty"> </span><span class="token smarty language-smarty attr-name" style="color:#00a4db">msg2</span><span class="token smarty language-smarty operator" style="color:#393A34">=</span><span class="token smarty language-smarty variable" style="color:#36acaa">$response</span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">{/</span><span class="token smarty language-smarty keyword" style="color:#00009f">if</span><span class="token smarty language-smarty delimiter punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Replace <code>/rcms-api/4/member/update_login_ok_ymd</code> with your own endpoint.</p></div></div><p><img loading="lazy" src="https://t.gyazo.com/teams/diverta/aa2691679dbb0dc8e5df70e70437981e.jpg?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/aa2691679dbb0dc8e5df70e70437981e.jpg" alt="Image from Gyazo" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="operation-check-2">Operation check<a href="#operation-check-2" class="hash-link" aria-label="Direct link to Operation check" title="Direct link to Operation check">​</a></h3><p>Finally, login with the target member's account to check the operation.  </p><p>If the setting is correct, the log will remain in the custom log as follows and the login permission expiry is updated.<br>
<img loading="lazy" src="https://t.gyazo.com/teams/diverta/5300e95dc355a565175a3d5368023d9c.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/5300e95dc355a565175a3d5368023d9c.png" alt="Image from Gyazo" class="img_ev3q">
<img loading="lazy" src="https://t.gyazo.com/teams/diverta/4fe03c2f312405d910e4feb29b85f8aa.png?width=600" data-zoom-src="https://t.gyazo.com/teams/diverta/4fe03c2f312405d910e4feb29b85f8aa.png" alt="Image from Gyazo" class="img_ev3q"></p><p>With the above, we have implemented a reminding and automatic withdrawal function to members without login for a certain period of time. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-documents">Related documents<a href="#related-documents" class="hash-link" aria-label="Direct link to Related documents" title="Direct link to Related documents">​</a></h2><ul><li><a href="/docs/tutorials/using-custom-member-filters/">Using custom member filters</a></li><li><a href="/docs/reference/trigger-variables/">List of variables available for custom functions</a></li><li><a href="/docs/faq/how-to-request-kuroco-api-from-smarty-function/">How to request kuroco API from smarty function</a></li><li><a href="/docs/faq/can-the-original-process-output-logs-for-debugging-purposes/">Can custom function output logs for debugging purposes?</a></li><li><a href="/docs/reference/smarty-plugin/">Smarty Plugin</a></li><li><a href="/docs/tutorials/how-to-link-sendgrid/">How to link with SendGrid</a></li></ul></div><div class="mt-10 pt-5"><hr class="border-t border-solid border-gray-300 dark:border-gray-900"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/diverta/kuroco-documents/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials/implement-reminder-and-automatic-deletion-of-members.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer><div class="card rounded-lg container mt-10 p-8 border-none bg-primary-soft dark:bg-slate-800 mb-10"><h2 class="text-2xl">Support</h2><p class="text-gray-800 dark:text-white">If you have any other questions, please contact us or check out Our Slack Community.</p><div class="md:flex mt-0"><div class="md:inline-flex rounded-md shadow"><a href="https://kuroco.zendesk.com/hc/" target="_blank" rel="noreferrer" class="button button--primary px-5 py-3 block">Contact form</a></div><div class="mt-3 md:mt-0 md:ml-4 md:inline-flex rounded-md shadow"><a href="/docs/about/support/" target="_blank" rel="noreferrer" class="button button--primary px-5 py-3 block">Join Kuroco Slack community</a></div></div></div></div></article></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#what-youll-learn" class="table-of-contents__link toc-highlight">What you'll learn</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li></ul></li><li><a href="#prerequisites-1" class="table-of-contents__link toc-highlight">Prerequisites</a><ul><li><a href="#set-the-expiration-date-for-member-login-permission" class="table-of-contents__link toc-highlight">Set the expiration date for member login permission</a></li><li><a href="#creating-an-api-for-internal-processing" class="table-of-contents__link toc-highlight">Creating an API for internal processing</a></li></ul></li><li><a href="#implementation-of-reminder-feature" class="table-of-contents__link toc-highlight">Implementation of Reminder Feature</a><ul><li><a href="#creating-a-custom-member-filter" class="table-of-contents__link toc-highlight">Creating a Custom Member Filter</a></li><li><a href="#create-notification" class="table-of-contents__link toc-highlight">Create notification</a></li><li><a href="#create-message-template" class="table-of-contents__link toc-highlight">Create message template</a></li><li><a href="#create-custom-function" class="table-of-contents__link toc-highlight">Create custom function</a></li><li><a href="#create-endpoint" class="table-of-contents__link toc-highlight">Create endpoint</a></li><li><a href="#create-batch-process" class="table-of-contents__link toc-highlight">Create batch process</a></li><li><a href="#operation-check" class="table-of-contents__link toc-highlight">Operation check</a></li></ul></li><li><a href="#implementation-of-automatic-withdrawal-feature" class="table-of-contents__link toc-highlight">Implementation of Automatic Withdrawal Feature</a><ul><li><a href="#creating-a-custom-member-filter-1" class="table-of-contents__link toc-highlight">Creating a Custom Member Filter</a></li><li><a href="#create-endpoints" class="table-of-contents__link toc-highlight">Create endpoints</a></li><li><a href="#create-batch-process-1" class="table-of-contents__link toc-highlight">Create batch process</a></li><li><a href="#operation-check-1" class="table-of-contents__link toc-highlight">Operation check</a></li></ul></li><li><a href="#implementation-of-the-feature-to-extend-the-expiration-date-when-a-member-logs-in" class="table-of-contents__link toc-highlight">Implementation of the feature to extend the expiration date when a member logs in</a><ul><li><a href="#create-endpoint-1" class="table-of-contents__link toc-highlight">Create endpoint</a></li><li><a href="#create-custom-function-1" class="table-of-contents__link toc-highlight">Create custom function</a></li><li><a href="#operation-check-2" class="table-of-contents__link toc-highlight">Operation check</a></li></ul></li><li><a href="#related-documents" class="table-of-contents__link toc-highlight">Related documents</a></li></ul></div></div></div></div></main></div></div><div style="position:fixed;z-index:9999;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none"></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">SITEMAP</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/quick-guide/">Quick Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/about/about-kuroco/">About Kuroco</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/about/what-is-a-headless-cms/">What is a Headless CMS?</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/management/dashboard/">Admin Manual</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/about/support/">Support</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/faq/">FAQ</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/update/kuroco-roadmap/">Releases</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/about/sales/">Materials</a></li><li class="footer__item"><a href="https://kuroco.statuspal.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">COMPANY</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://kuroco.zendesk.com/hc/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://hisashihasebe.github.io/document_archive_public/202401/files/legal/Kuroco-terms-of-service.pdf" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms &amp; conditions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.diverta.co.jp/en/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Diverta Inc. All rights reserved.</div></div></div></footer></div>
<script src="/document_archive_public/202401/assets/js/runtime~main.da1a0a86.js"></script>
<script src="/document_archive_public/202401/assets/js/main.8624ea78.js"></script>

</body></html>